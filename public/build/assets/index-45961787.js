import{L as D}from"./main-85dda269.js";import{P as N}from"./page-header-9d3b8f0d.js";import{a as p}from"./axios-dd1c8fc2.js";import{C as S}from"./vue-flatpickr-component-c2a9dfde.js";import"./flatpickr-71ae45d8.js";import"./vue-e44c720a.js";import{_ as L}from"../js/app2.js";import{b as m,f as a,_ as n,ae as i,a as d,m as c,e as t,t as r,h as H,k as _,v as h,F as f,g as k,p as K}from"./@vue-2f47e84f.js";import"./simplebar-vue-f87408bd.js";import"./simplebar-core-3f5973b9.js";import"./lodash-es-9b1d07da.js";import"./logo-light-9f0efe74.js";import"./logo-9faa3827.js";import"./avatar-1-15b743f1.js";import"./avatar-3-36dc574b.js";import"./metismenujs-584191f1.js";import"./@babel-043c4917.js";import"./@amcharts-e4830be1.js";import"./tslib-72b7de63.js";import"./d3-geo-6bb4a2e5.js";import"./d3-array-e52edd26.js";import"./polylabel-4d4cd514.js";import"./tinyqueue-ccd7a0a5.js";import"./d3-geo-projection-f6bdcdf9.js";import"./core-js-01584e85.js";import"./raf-98f7053a.js";import"./performance-now-4def5153.js";import"./rgbcolor-a22a20ff.js";import"./stackblur-canvas-7b6438f0.js";import"./vue-router-bbc31d4f.js";import"./figlet-ec70a4bf.js";import"./vue3-apexcharts-094e7a9e.js";import"./maska-1eacf752.js";import"./vue-i18n-af6f3290.js";import"./@intlify-28f1e2f7.js";import"./bootstrap-vue-next-9af1e26b.js";import"./gitart-vue-dialog-1c989299.js";import"./@vueform-66335761.js";const T={data(){return{user:JSON.parse(localStorage.getItem("user")),ptk:null,mapels:[],kelas:[],reports:[],mapel_id:"",kelas_id:null,mapel_id:"",kelas_id:"",dari:"",sampai:"",ket:"",desk:""}},methods:{async getPtk(){await p.get("/api/guru/ijin").then(l=>{this.ptk=l.data})},async getMapels(){await p.get("/api/guru/getMapels").then(l=>{this.mapels=l.data})},async getkelas(){await p.get("/api/guru/getGuruKelas").then(l=>{this.kelas=l.data,this.kelas.sort((o,g)=>o.rombels.nama.localeCompare(g.rombels.nama))})},async simpan(){await p.post("/api/guru/simI",{mapel_id:this.mapel_id,kelas_id:this.kelas_id,dari:this.dari,sampai:this.sampai,ket:this.ket,desk:this.desk}).then(l=>{console.log(l)}).catch(l=>{console.log(l,"error")})},async getMe(){await p.post("/api/guru/me",{user_id:this.user.user_id}).then(l=>{this.reports=l.data}).catch(l=>{console.log(l)})},async hapus(l){confirm("yakin menghapus ?")&&await p.delete("/api/guru/del/"+l).then(o=>{this.getMe()})}},components:{Layout:D,PageHeader:N,flatPickr:S},created(){this.getPtk(),this.getMapels(),this.getMe()}},I={key:0},F={class:"btn btn-md btn-outline-primary me-2",type:"button"},R={class:"row"},A={class:"form-group mt-5 col-6"},E=t("label",null,"Pilih mapel",-1),G=t("option",{value:""},"---",-1),J=["value"],O={class:"form-group mt-5 col-6"},q=t("label",null,"Pilih Kelas",-1),z=t("option",{value:""},"---",-1),Q=["value"],W={class:"form-group mt-3 col-6"},X=t("label",{for:""},"Dari",-1),Y={class:"form-group mt-3 col-6"},Z=t("label",{for:""},"Sampai",-1),$={class:"form-group mt-3"},tt=t("label",null,"Pilih Keterangan",-1),et=t("option",{value:"ijin"},"Ijin",-1),ot=t("option",{value:"sakit"},"Sakit",-1),st=t("option",{value:"dl"},"Dinas Luar",-1),lt=[et,ot,st],at={class:"form-group mt-3"},nt=t("label",null,"Deskripsi Tugas",-1),it={class:"table-responsive"},rt={class:"table table-hover"},mt=t("thead",null,[t("th",null,"No"),t("th",null,"Nama"),t("th",null,"Ket"),t("th",null,"Kelas"),t("th",null,"Dari"),t("th",null,"Sampai"),t("th",null,"Desk"),t("th",null,"#")],-1),dt={style:{width:"10%"}},pt=["onClick"],ut=t("span",{class:"fa fa-trash"},null,-1),_t=[ut];function ct(l,o,g,ht,s,u){const B=i("H5"),w=i("BCardTitle"),V=i("BCardHeader"),b=i("flat-pickr"),v=i("BCardBody"),y=i("BCard"),x=i("BCol"),C=i("BBadge"),P=i("bCol"),M=i("BRow"),U=i("Layout");return d(),m("div",null,[a(U,null,{default:n(()=>[a(M,null,{default:n(()=>[a(x,{lg:"6"},{default:n(()=>[a(y,{"no-body":""},{default:n(()=>[a(V,null,{default:n(()=>[a(w,null,{default:n(()=>[a(B,null,{default:n(()=>[c("Apps Perijinan")]),_:1})]),_:1})]),_:1}),a(v,null,{default:n(()=>[s.ptk?(d(),m("div",I,[t("button",F,r(s.ptk.nama.toUpperCase()),1)])):H("",!0),t("div",R,[t("div",A,[E,_(t("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.mapel_id=e),class:"form-control",onChange:o[1]||(o[1]=(...e)=>u.getkelas&&u.getkelas(...e))},[G,(d(!0),m(f,null,k(s.mapels,e=>(d(),m("option",{key:e.mata_pelajaran_id,value:e.mata_pelajaran_id},r(e.mata_pelajaran_id_str),9,J))),128))],544),[[h,s.mapel_id]])]),t("div",O,[q,_(t("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.kelas_id=e),class:"form-control"},[z,(d(!0),m(f,null,k(s.kelas,e=>(d(),m("option",{key:e.rb_id,value:e.rb_id},r(e.rombels.nama),9,Q))),128))],512),[[h,s.kelas_id]])]),t("div",W,[X,a(b,{modelValue:s.dari,"onUpdate:modelValue":o[3]||(o[3]=e=>s.dari=e),"first-day-of-week":1,lang:"en",confirm:"",class:"form-control"},null,8,["modelValue"])]),t("div",Y,[Z,a(b,{modelValue:s.sampai,"onUpdate:modelValue":o[4]||(o[4]=e=>s.sampai=e),"first-day-of-week":1,lang:"en",confirm:"",class:"form-control"},null,8,["modelValue"])]),t("div",$,[tt,_(t("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.ket=e),class:"form-control"},lt,512),[[h,s.ket]])]),t("div",at,[nt,_(t("textarea",{"onUpdate:modelValue":o[6]||(o[6]=e=>s.desk=e),type:"text",class:"form-control"},null,512),[[K,s.desk]])])]),t("button",{class:"btn btn-primary mt-3",onClick:o[7]||(o[7]=(...e)=>u.simpan&&u.simpan(...e))}," simpan ")]),_:1})]),_:1})]),_:1}),a(P,{lg:"6"},{default:n(()=>[a(y,{"np-body":""},{default:n(()=>[a(v,null,{default:n(()=>[t("div",it,[t("table",rt,[mt,t("tbody",null,[(d(!0),m(f,null,k(s.reports,(e,j)=>(d(),m("tr",{key:e.id},[t("td",null,r(j+1),1),t("td",null,[a(C,{variant:"primary"},{default:n(()=>[c(r(e.user.name),1)]),_:2},1024)]),t("td",null,[a(C,{variant:"success"},{default:n(()=>[c(r(e.ket.toUpperCase()),1)]),_:2},1024)]),t("td",dt,r(e.kelas.nama),1),t("td",null,r(e.dari),1),t("td",null,r(e.sampai),1),t("td",null,r(e.desk),1),t("td",null,[t("button",{class:"btn btn-sm btn-danger",onClick:ft=>u.hapus(e.id)},_t,8,pt)])]))),128))])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const ee=L(T,[["render",ct]]);export{ee as default};
