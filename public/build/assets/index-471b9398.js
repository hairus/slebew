import{f as b,L as z}from"./main-611df75c.js";import{g as O}from"./style-2b4551fa.js";import{a as p}from"./axios-9cbf0d09.js";import{_ as y,r as d,o as i,i as a,b as m,w as u,a as o,v as c,x as v,z as k,q as T,F as S,k as x,s as V,t as M,y as F,c as C,d as w,B as N,C as D}from"../js/app2.js";import"./logo-light-9f0efe74.js";import"./logo-9faa3827.js";import"./avatar-1-15b743f1.js";import"./avatar-3-36dc574b.js";const j={name:"ModalAddMenu",props:["roles"],data(){return{showModal:!1,label:"",isTitle:null,icon:"",role:""}},watch:{isTitle(s){s===!0&&(this.icon="bx")}},methods:{closeModal(){this.showModal=!this.showModal,this.label="",this.isTitle=null,this.role="",this.icon="bx"},removeIsTitlePlaceholder(){this.isTitle===null&&(this.isTitle=!1)},removeRolePlaceholder(){this.role=this.role||null},async simMenu(){if(this.isTitle===null)return alert("Title Option tidak boleh kosong!");if(this.role===null||this.role==="")return alert("Role Menu tidak boleh kosong!");if(this.label==="")return alert("Label tidak boleh kosong!");await p.post("/api/admin/menus",{label:this.label,isTitle:this.isTitle,role:this.role,icon:this.isTitle?"bx":this.icon}).then(s=>{this.showModal=!1,this.$emit("reload"),this.label="",this.isTitle=null,this.role="",this.icon="",b()})}}},H={class:"form-group"},q=o("label",{for:""},"Label",-1),E={class:"form-group"},Y=o("label",{for:""},"Sebagai Title?",-1),G=o("option",{value:null,disabled:""},"- Pilih Title Option -",-1),J=o("option",{value:!1},"Tidak, jadikan parent menu",-1),K=o("option",{value:!0},"Ya, jadikan title menu",-1),Q=[G,J,K],W={key:0,class:"form-group"},X=o("label",{for:""},"Icon",-1),Z={class:"form-group"},$=o("label",{for:""},"Role",-1),ee={key:0,disabled:"",value:""},le=["value"];function oe(s,e,r,_,t,n){const h=d("BModal");return i(),a("div",null,[m(h,{modelValue:t.showModal,"onUpdate:modelValue":e[6]||(e[6]=l=>t.showModal=l),onHide:e[7]||(e[7]=V(()=>{},["prevent"])),onOk:n.simMenu,onCancel:n.closeModal,onClose:n.closeModal,id:"modal-center-menu",centered:"",title:"Add Menu or Title"},{default:u(()=>[o("form",null,[o("div",H,[q,c(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=l=>t.label=l)},null,512),[[v,t.label]])]),o("div",E,[Y,c(o("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=l=>t.isTitle=l),onFocus:e[2]||(e[2]=(...l)=>n.removeIsTitlePlaceholder&&n.removeIsTitlePlaceholder(...l))},Q,544),[[k,t.isTitle]])]),t.isTitle?T("",!0):(i(),a("div",W,[X,c(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=l=>t.icon=l)},null,512),[[v,t.icon]])])),o("div",Z,[$,c(o("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=l=>t.role=l),onFocus:e[5]||(e[5]=(...l)=>n.removeRolePlaceholder&&n.removeRolePlaceholder(...l))},[t.role?T("",!0):(i(),a("option",ee,"- Pilih Role -")),(i(!0),a(S,null,x(r.roles,l=>(i(),a("option",{key:l.id,value:l.role},M(l.role),9,le))),128))],544),[[k,t.role]])])])]),_:1},8,["modelValue","onOk","onCancel","onClose"])])}const te=y(j,[["render",oe]]),se={name:"ModalAddSubMenu",props:["menus","roles"],data(){return{showModal:!1,parent:"",label:"",link:""}},methods:{closeModal(){this.showModal=!this.showModal,this.parent="",this.label="",this.link=""},removePlaceholder(){this.parent=this.parent||null},async simSub(){if(this.parent===""||this.label===""||this.link==="")return alert(`Tolong lengkapi form terlebih dahulu

Harap perhatikan:
 - Parent Menu
 - Label Menu
 - Link Menu`);await p.post("/api/admin/menus",{parent:this.parent,label:this.label,link:this.link}).then(s=>{this.showModal=!1,this.$emit("reload"),this.parent="",this.label="",this.link="",b()})}}},ne={class:"form-group"},ie=o("label",{for:"",class:"mt-4"},"Parent",-1),ae={key:0,disabled:"",value:""},re=["value"],de=o("label",{for:"",class:"mt-4"},"Label",-1),ue=o("label",{for:"",class:"mt-4"},"Link",-1);function ce(s,e,r,_,t,n){const h=d("BModal");return i(),a("div",null,[m(h,{modelValue:t.showModal,"onUpdate:modelValue":e[4]||(e[4]=l=>t.showModal=l),onHide:e[5]||(e[5]=V(()=>{},["prevent"])),onOk:n.simSub,onCancel:n.closeModal,onClose:n.closeModal,id:"modal-center-SubMenu",centered:"",title:"Add Sub Menu"},{default:u(()=>[o("form",null,[o("div",ne,[ie,c(o("select",{name:"",id:"","onUpdate:modelValue":e[0]||(e[0]=l=>t.parent=l),class:"form-control",onFocus:e[1]||(e[1]=(...l)=>n.removePlaceholder&&n.removePlaceholder(...l))},[t.parent?T("",!0):(i(),a("option",ae,"- Pilih Parent Menu -")),(i(!0),a(S,null,x(r.menus,l=>(i(),a("option",{key:l.id,value:l.id},M(l.label),9,re))),128))],544),[[k,t.parent]]),de,c(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=l=>t.label=l)},null,512),[[v,t.label]]),ue,c(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=l=>t.link=l)},null,512),[[v,t.link]])])])]),_:1},8,["modelValue","onOk","onCancel","onClose"])])}const me=y(se,[["render",ce]]);const he={data(){return{cols:[{field:"id",title:"No"},{field:"label",title:"Label"},{field:"isTitle",title:"isTitle"},{field:"icon",title:"Icon"},{field:"role",title:"Role"},{field:"sub_menus",title:"SubMenu"}],loading:!0,total_rows:0,params:{current_page:1,pagesize:5},rows:[],errors:[],roles:[],subRows:[]}},methods:{async getMenus(){await p.get("/api/admin/menus").then(s=>{const e=s.data.data.filter(r=>r.isTitle===0||r.isTitle===!1);this.subRows=e,this.rows=s.data.data,this.total_rows=s.data.total,this.loading=!1,b()}).catch(s=>{console.log(s)})},async getRoles(){await p.get("/api/admin/role").then(s=>{this.roles=s.data.data})},async remSub(s){confirm("anda yakin menghapus sub menu ?")&&await p.delete("/api/admin/menus/"+s).then(e=>{this.getMenus(),b()})},async changeServer(s){console.log(s),this.loading=!0,await p.get("/api/admin/menus?page="+s.current_page+"&paginate="+parseInt(s.pagesize)).then(e=>{const r=e.data.data.filter(_=>_.isTitle===0||_.isTitle===!1);this.subRows=r,this.rows=e.data.data,this.loading=!1,b()})}},components:{Layout:z,Vue3Datatable:O,AddMenu:te,AddSubMenu:me},created(){this.getMenus(),this.getRoles()}},B=s=>(N("data-v-b45739bd"),s=s(),D(),s),pe={class:"card"},_e=B(()=>o("div",{class:"card-header"},[o("div",{class:"card-title"},"Setting Menu")],-1)),be={class:"card-body"},fe={class:"clearfix"},ve={class:"table table-responsive"},Me={class:"d-flex justify-content-between",style:{width:"190px"}},ge=["onClick"],we=B(()=>o("span",{class:"fa fa-trash"},null,-1)),ke=[we];function Te(s,e,r,_,t,n){const h=d("BButton"),l=d("vue3-datatable"),P=d("BRow"),L=d("BCol"),I=d("add-menu"),U=d("add-sub-menu"),A=d("Layout"),R=F("b-modal");return i(),a("div",null,[m(A,null,{default:u(()=>[m(L,null,{default:u(()=>[m(P,null,{default:u(()=>[o("div",pe,[_e,o("div",be,[o("div",fe,[c((i(),C(h,{class:"float-end mb-2 btn-success"},{default:u(()=>[w("Add Menu or Title ")]),_:1})),[[R,void 0,void 0,{"modal-center-menu":!0}]]),c((i(),C(h,{class:"float-end mb-2 btn-info me-2"},{default:u(()=>[w("Add Sub Menu ")]),_:1})),[[R,void 0,void 0,{"modal-center-SubMenu":!0}]])]),o("div",ve,[m(l,{rows:t.rows,columns:t.cols,loading:t.loading,totalRows:t.total_rows,isServerMode:!0,pageSize:t.params.pagesize,onChange:n.changeServer,pageSizeOptions:[5,10,20,50,100],skin:"bh-table-striped"},{id:u(f=>[o("p",null,M(f.value.id),1)]),sub_menus:u(f=>[(i(!0),a(S,null,x(f.value.sub_menus,g=>(i(),a("ul",{key:g.id},[o("li",Me,[w(M(g.label)+" ",1),o("button",{class:"btn btn-danger btn-sm",onClick:ye=>n.remSub(g.id)},ke,8,ge)])]))),128))]),_:1},8,["rows","columns","loading","totalRows","pageSize","onChange"])])])])]),_:1})]),_:1}),m(I,{roles:t.roles,onReload:n.getMenus},null,8,["roles","onReload"]),m(U,{menus:t.subRows,roles:t.roles,onReload:e[0]||(e[0]=f=>n.getMenus())},null,8,["menus","roles"])]),_:1})])}const Ie=y(he,[["render",Te],["__scopeId","data-v-b45739bd"]]);export{Ie as default};
