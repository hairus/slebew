import{L as J}from"./main-85dda269.js";import{P as Q}from"./page-header-9d3b8f0d.js";import{a as p}from"./axios-dd1c8fc2.js";import{A as W}from"./bootstrap-vue-next-9af1e26b.js";import{L as X}from"./loader-0ee32ba3.js";import{s as Z}from"./vue-multiselect-053802f7.js";import{C as K}from"./vue-flatpickr-component-c2a9dfde.js";import{m as F}from"./flatpickr-71ae45d8.js";import"./vue-e44c720a.js";import{_ as R}from"../js/app2.js";import{ae as s,a as u,b as h,e as t,l as $,k as V,v as x,F as S,g as U,f as n,t as m,_ as l,m as g,M as b,h as w,q as tt}from"./@vue-2f47e84f.js";import"./simplebar-vue-f87408bd.js";import"./simplebar-core-3f5973b9.js";import"./lodash-es-9b1d07da.js";import"./logo-light-9f0efe74.js";import"./logo-9faa3827.js";import"./avatar-1-15b743f1.js";import"./avatar-3-36dc574b.js";import"./metismenujs-584191f1.js";import"./@babel-043c4917.js";import"./@amcharts-e4830be1.js";import"./tslib-72b7de63.js";import"./d3-geo-6bb4a2e5.js";import"./d3-array-e52edd26.js";import"./polylabel-4d4cd514.js";import"./tinyqueue-ccd7a0a5.js";import"./d3-geo-projection-f6bdcdf9.js";import"./core-js-01584e85.js";import"./raf-98f7053a.js";import"./performance-now-4def5153.js";import"./rgbcolor-a22a20ff.js";import"./stackblur-canvas-7b6438f0.js";import"./vue-router-bbc31d4f.js";import"./figlet-ec70a4bf.js";import"./vue3-apexcharts-094e7a9e.js";import"./maska-1eacf752.js";import"./vue-i18n-af6f3290.js";import"./@intlify-28f1e2f7.js";import"./gitart-vue-dialog-1c989299.js";import"./@vueform-66335761.js";const et={props:["price"],components:{Multiselect:Z,flatPickr:K},data(){return{kelass:[],siswas:[],siswa_id:[],nominal:0,picked:"",kelas_id:""}},methods:{formatPrice(a){return(a/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},async getSiswas(){this.picked!==""&&await p.post("/api/admin/dapo/getSiswaTrx",{tanggal:this.picked,kelas:this.kelas_id}).then(a=>{this.siswas=a.data})},aksi(){this.picked="",this.siswas=[]},async getKelas(){await p.get("/api/admin/dapo/getDatas").then(a=>{this.kelass=a.data.kelas})},async simpan(){await p.post("/api/admin/komites",{siswa_id:this.siswa_id,nominal:this.nominal,kelas_id:this.kelas_id,tgl:this.picked}).then(a=>{this.siswa_id=[],this.nominal="",this.kelas_id="",this.picked=""})}},mounted(){this.getKelas()}},ot={class:"row"},nt={class:"col"},at={class:"card"},lt=t("div",{class:"card-header"},[t("div",{class:"card-title"},"Pembayaran Komite")],-1),st={class:"card-body"},it={class:"row"},rt={class:"form-group col-6"},dt=t("label",null,"Pilih Nominal",-1),ut=["value"],ct={class:"form-group col-6"},mt=t("label",null,"Pilih kelas",-1),pt=["value"],ht={class:"form-group col-12 mt-3"},_t=t("label",null,"Pilih Tanggal",-1),ft={class:"form-group mt-3"},gt=t("label",null,"Pilih Siswa",-1),kt=t("button",{class:"btn btn-sm btn-primary mt-3"},"Submit",-1);function wt(a,e,v,k,o,i){const y=s("flat-pickr"),_=s("multiselect");return u(),h("div",ot,[t("div",nt,[t("div",at,[lt,t("div",st,[t("form",{action:"",onSubmit:e[5]||(e[5]=$((...r)=>i.simpan&&i.simpan(...r),["prevent"]))},[t("div",it,[t("div",rt,[dt,V(t("select",{class:"form-control","onUpdate:modelValue":e[0]||(e[0]=r=>o.nominal=r)},[(u(!0),h(S,null,U(v.price,r=>(u(),h("option",{key:r.id,value:r.price},m(i.formatPrice(r.price)),9,ut))),128))],512),[[x,o.nominal]])]),t("div",ct,[mt,V(t("select",{class:"form-control","onUpdate:modelValue":e[1]||(e[1]=r=>o.kelas_id=r),onChange:e[2]||(e[2]=(...r)=>i.aksi&&i.aksi(...r))},[(u(!0),h(S,null,U(o.kelass,r=>(u(),h("option",{key:r.id,value:r.rombongan_belajar_id},m(r.nama),9,pt))),128))],544),[[x,o.kelas_id]])]),t("div",ht,[_t,n(y,{modelValue:o.picked,"onUpdate:modelValue":e[3]||(e[3]=r=>o.picked=r),onChange:i.getSiswas,"first-day-of-week":1,lang:"en",confirm:"",class:"form-control"},null,8,["modelValue","onChange"])])]),t("div",ft,[gt,n(_,{modelValue:o.siswa_id,"onUpdate:modelValue":e[4]||(e[4]=r=>o.siswa_id=r),"deselect-label":"Can't remove this value","track-by":"nama",label:"nama",placeholder:"Pilih Siswa",options:o.siswas,searchable:!0,"allow-empty":!0,multiple:"true"},null,8,["modelValue","options"])]),kt],32)])])])])}const Bt=R(et,[["render",wt]]),bt={data(){return{komites:[],totalHarian:null,totalBulan:null,totalTahun:null,opsi1:"",picked11:"",picked12:"",picked22:"",showHarian1:!1,showBulanan1:!1,showTahunan1:!1,config:{plugins:[new F({shorthand:!0,dateFormat:"m-Y",altFormat:"F Y",theme:"light"})]},config1:{plugins:[new F({shorthand:!0,dateFormat:"Y",altFormat:"Y",theme:"light"})]}}},methods:{formatPrice(a){return(a/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},status1(){this.opsi1==="1"?(this.showHarian1=!0,this.showBulanan1=!1,this.showTahunan1=!1):this.opsi1==="2"?(this.showBulanan1=!0,this.showHarian1=!1,this.showTahunan1=!1):this.opsi1==="3"?(this.showTahunan1=!0,this.showBulanan1=!1,this.showHarian1=!1):(this.showHarian1=!1,this.showBulanan1=!1,this.showTahunan1=!1)},async getHarian(){await p.post("/api/admin/komites/income",{tanggal:this.picked11}).then(a=>{this.totalHarian=a.data.harian,this.totalBulan=null,this.totalTahun=null})},async getBulanan(){await p.post("/api/admin/komites/income",{bulan:this.picked12}).then(a=>{this.totalBulan=a.data.bulanan,this.totalHarian=null,this.totalTahun=null})},async getTahunan(){await p.post("/api/admin/komites/income",{tahun:this.picked22}).then(a=>{this.totalTahun=a.data.tahunan,this.totalBulan=null,this.totalHarian=null})},async getReport(){this.opsi1==="1"?this.getHarian():this.opsi1==="2"?this.getBulanan():this.opsi1==="3"?this.getTahunan():alert("maaf item belum terpilih")}},components:{flatPickr:K},mounted(){}},yt={action:""},vt={class:"row"},Ct={class:"form-group col-6"},Tt=t("label",{for:""},"Pilih Opsi",-1),Pt=t("option",{value:"1"},"Harian",-1),Vt=t("option",{value:"2"},"Bulanan",-1),Ht=t("option",{value:"3"},"Tahunan",-1),Ft=[Pt,Vt,Ht],xt={class:"form-group col-6"},St=t("label",{for:""},"Pilih Opsi",-1),Ut={key:0,class:"mt-5"},Rt={key:1,class:"mt-5"},Mt={key:2,class:"mt-5"};function Lt(a,e,v,k,o,i){const y=s("BCardTitle"),_=s("flat-pickr"),r=s("BCardBody"),C=s("BCard"),T=s("BCol"),B=s("BRow");return u(),h("div",null,[n(B,null,{default:l(()=>[n(T,null,{default:l(()=>[n(C,{"no-body":""},{default:l(()=>[n(r,null,{default:l(()=>[n(y,null,{default:l(()=>[g("Report Keuangan")]),_:1}),t("form",yt,[t("div",vt,[t("div",Ct,[Tt,V(t("select",{onChange:e[0]||(e[0]=(...c)=>i.status1&&i.status1(...c)),"onUpdate:modelValue":e[1]||(e[1]=c=>o.opsi1=c),class:"form-control"},Ft,544),[[x,o.opsi1]])]),t("div",xt,[St,o.showHarian1?(u(),b(_,{key:0,modelValue:o.picked11,"onUpdate:modelValue":e[2]||(e[2]=c=>o.picked11=c),lang:"id",class:"form-control"},null,8,["modelValue"])):w("",!0),o.showBulanan1?(u(),b(_,{key:1,modelValue:o.picked12,"onUpdate:modelValue":e[3]||(e[3]=c=>o.picked12=c),config:o.config,lang:"id",class:"form-control"},null,8,["modelValue","config"])):w("",!0),o.showTahunan1?(u(),b(_,{key:2,modelValue:o.picked22,"onUpdate:modelValue":e[4]||(e[4]=c=>o.picked22=c),config:o.config1,lang:"id",class:"form-control"},null,8,["modelValue","config"])):w("",!0)])]),t("button",{type:"button",class:"btn btn-info mt-3",onClick:e[5]||(e[5]=(...c)=>i.getReport&&i.getReport(...c))}," Pilih ")]),o.totalHarian?(u(),h("h1",Ut," Pendapatan Harian : "+m(i.formatPrice(o.totalHarian)),1)):w("",!0),o.totalBulan?(u(),h("h1",Rt," Pendapatan Bulanan : "+m(i.formatPrice(o.totalBulan)),1)):w("",!0),o.totalTahun?(u(),h("h1",Mt," Pendapatan Tahunan : "+m(i.formatPrice(o.totalTahun)),1)):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])}const Kt=R(bt,[["render",Lt]]),Nt={data(){return{komites:[],totalBulan:null,totalTahun:null,opsi:"",picked:"",picked1:"",picked2:"",showHarian:!1,showBulanan:!1,showTahunan:!1,config:{plugins:[new F({shorthand:!0,dateFormat:"m-Y",altFormat:"F Y",theme:"light"})]},config1:{plugins:[new F({shorthand:!0,dateFormat:"Y",altFormat:"Y",theme:"light"})]}}},methods:{formatPrice(a){return(a/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},status(){this.opsi==="1"?(this.showHarian=!0,this.showBulanan=!1,this.showTahunan=!1):this.opsi==="2"?(this.showBulanan=!0,this.showHarian=!1,this.showTahunan=!1):this.opsi==="3"?(this.showTahunan=!0,this.showBulanan=!1,this.showHarian=!1):(this.showHarian=!1,this.showBulanan=!1,this.showTahunan=!1)},cetak(){},download(a){p.get("/api/admin/komites/cetak/"+a,{responseType:"blob"}).then(e=>{const v=window.URL.createObjectURL(new Blob([e.data])),k=document.createElement("a");k.href=v,k.setAttribute("download","example.pdf"),document.body.appendChild(k),k.click(),k.remove()}).catch(e=>{console.error("Error downloading PDF:",e)})},async getKomites(){await p.get("/api/admin/komites").then(a=>{this.komites=a.data.komites,this.totalBulan=a.data.sumBulan,this.totalTahun=a.data.sumTahun})},async getHarian(){await p.put("/api/admin/komites/show",{tanggal:this.picked}).then(a=>{this.komites=a.data})},async getBulanan(){await p.put("/api/admin/komites/show",{bulan:this.picked1}).then(a=>{this.komites=a.data})},async getTahunan(){await p.put("/api/admin/komites/show",{tahun:this.picked2}).then(a=>{this.komites=a.data})},async getData(){this.opsi==="1"?this.getHarian():this.opsi==="2"?this.getBulanan():this.opsi==="3"?this.getTahunan():alert("maaf item belum terpilih")}},components:{flatPickr:K,report:Kt},mounted(){this.getKomites()}},Yt={action:""},Dt={class:"row"},Et={class:"form-group col-6"},At=t("label",{for:""},"Pilih Opsi",-1),Ot=t("option",{value:"1"},"Harian",-1),jt=t("option",{value:"2"},"Bulanan",-1),It=t("option",{value:"3"},"Tahunan",-1),Gt=[Ot,jt,It],qt={class:"form-group col-6"},zt=t("label",{for:""},"Pilih Opsi",-1),Jt={class:"table table-responsive"},Qt={class:"table table-hover"},Wt=t("thead",null,[t("th",null,"NISN"),t("th",null,"Nama"),t("th",null,"Kelas"),t("th",null,"Nominal"),t("th",null,"Pembayaran"),t("th",null,"Action"),t("th",null,"Create")],-1),Xt=["onClick"],Zt=t("span",{class:"fa fa-print"},null,-1),$t=[Zt],te=t("hr",null,null,-1);function ee(a,e,v,k,o,i){const y=s("BCardTitle"),_=s("flat-pickr"),r=s("BCardBody"),C=s("BCard"),T=s("BCol"),B=s("BRow"),c=s("report");return u(),h("div",null,[n(B,null,{default:l(()=>[n(T,null,{default:l(()=>[n(C,{"no-body":""},{default:l(()=>[n(r,null,{default:l(()=>[n(y,null,{default:l(()=>[g("Hasil")]),_:1}),t("form",Yt,[t("div",Dt,[t("div",Et,[At,V(t("select",{onChange:e[0]||(e[0]=(...d)=>i.status&&i.status(...d)),"onUpdate:modelValue":e[1]||(e[1]=d=>o.opsi=d),class:"form-control"},Gt,544),[[x,o.opsi]])]),t("div",qt,[zt,o.showHarian?(u(),b(_,{key:0,modelValue:o.picked,"onUpdate:modelValue":e[2]||(e[2]=d=>o.picked=d),lang:"id",class:"form-control"},null,8,["modelValue"])):w("",!0),o.showBulanan?(u(),b(_,{key:1,modelValue:o.picked1,"onUpdate:modelValue":e[3]||(e[3]=d=>o.picked1=d),config:o.config,lang:"id",class:"form-control"},null,8,["modelValue","config"])):w("",!0),o.showTahunan?(u(),b(_,{key:2,modelValue:o.picked2,"onUpdate:modelValue":e[4]||(e[4]=d=>o.picked2=d),config:o.config1,lang:"id",class:"form-control"},null,8,["modelValue","config"])):w("",!0)])]),t("button",{type:"button",class:"btn btn-primary btn-sm mt-3",onClick:e[5]||(e[5]=(...d)=>i.getData&&i.getData(...d))}," Pilih ")]),t("div",Jt,[t("table",Qt,[Wt,t("tbody",null,[(u(!0),h(S,null,U(o.komites,d=>(u(),h("tr",{key:d.id},[t("td",null,m(d.nisn),1),t("td",null,m(d.peserta_didiks.nama),1),t("td",null,m(d.peserta_didiks.nama_rombel),1),t("td",null,m(i.formatPrice(d.nominal)),1),t("td",null,m(d.tgl)+"-"+m(d.bulan)+"-"+m(d.tahun),1),t("td",null,[t("button",{class:"btn rounded-pill btn-outline-primary",onClick:M=>i.download(d.id)},$t,8,Xt)]),t("td",null,m(d.created_at),1)]))),128))])]),te])]),_:1})]),_:1})]),_:1})]),_:1}),n(c)])}const oe=R(Nt,[["render",ee]]),ne={components:{BModal:W,Layout:J,PageHeader:Q,Loader:X,inputCustom:Bt,tableKomite:oe},data(){return{form:{price:"",id:""},prices:[],showModal:!1,loading:!1,value:null,options:["list","of","options"]}},methods:{formatPrice(a){return(a/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},async simpan(){this.loading=!0,await p.post("/api/admin/komite",{price:this.form.price}).then(a=>{this.form.price="",this.getPrice(),this.loading=!1}).catch(a=>{console.log(a)})},async getPrice(){await p.get("/api/admin/getPrice").then(a=>{this.prices=a.data})},editPrice(a,e){this.showModal=!0,this.form.price=a,this.form.id=e},async update(){this.loading=!0,await p.put("/api/admin/update",{id:this.form.id,price:this.form.price}).then(a=>{this.getPrice(),this.showModal=!1,this.form.price="",this.form.id="",this.loading=!1})},async removePrice(a){this.loading=!0,await p.delete("/api/admin/delPrice/"+a).then(e=>{this.getPrice(),this.loading=!1})},myChangeEvent(a){console.log(a)},mySelectEvent({id:a,text:e}){console.log({id:a,text:e})}},created(){this.getPrice()}},ae=t("i",{class:"mdi mdi-pencil"},null,-1),le=t("i",{class:"mdi mdi-trash-can"},null,-1),se={class:"text-center mb-4"},ie=t("div",{class:"avatar-md mx-auto mb-4"},[t("div",{class:"avatar-title bg-light rounded-circle text-primary h1"},[t("i",{class:"mdi mdi-tooltip-edit"})])],-1),re=t("h4",{class:"text-primary"},"Edit !",-1);function de(a,e,v,k,o,i){const y=s("PageHeader"),_=s("Loader"),r=s("BCardTitle"),C=s("BFormInput"),T=s("BFormGroup"),B=s("BButton"),c=s("BForm"),d=s("BCardBody"),M=s("BCard"),P=s("BCol"),H=s("BTh"),N=s("BTr"),D=s("BThead"),Y=s("BTd"),E=s("BTbody"),A=s("BTableSimple"),O=s("input-custom"),j=s("table-komite"),L=s("BRow"),I=s("BModal"),G=s("Layout");return u(),b(G,null,{default:l(()=>[n(y,{title:"Komite",pageTitle:"Dashboards"}),V(n(_,null,null,512),[[tt,o.loading]]),n(L,null,{default:l(()=>[n(P,{lg:"6"},{default:l(()=>[n(M,{"no-body":""},{default:l(()=>[n(d,{id:"formku"},{default:l(()=>[n(r,{class:"mb-4"},{default:l(()=>[g("Pengaturan Komite")]),_:1}),n(c,null,{default:l(()=>[n(T,{class:"mb-3",label:"Biaya","label-for":"formrow-firstname-input"},{default:l(()=>[n(C,{id:"formrow-firstname-input",type:"number",modelValue:o.form.price,"onUpdate:modelValue":e[0]||(e[0]=f=>o.form.price=f),placeholder:"Enter Your Price"},null,8,["modelValue"])]),_:1}),t("div",null,[n(B,{type:"submit",onClick:i.simpan,variant:"primary",class:"btn btn-sm"},{default:l(()=>[g("Submit")]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1}),n(P,{lg:"6"},{default:l(()=>[n(M,{"no-body":""},{default:l(()=>[n(d,null,{default:l(()=>[n(r,{class:"mb-4"},{default:l(()=>[g("Result")]),_:1}),n(A,{responsive:""},{default:l(()=>[n(D,null,{default:l(()=>[n(N,null,{default:l(()=>[n(H,null,{default:l(()=>[g("No")]),_:1}),n(H,null,{default:l(()=>[g("Biaya")]),_:1}),n(H,null,{default:l(()=>[g("Action")]),_:1})]),_:1})]),_:1}),n(E,null,{default:l(()=>[(u(!0),h(S,null,U(o.prices,(f,q)=>(u(),b(N,{key:f},{default:l(()=>[n(H,null,{default:l(()=>[g(m(q+1),1)]),_:2},1024),n(Y,null,{default:l(()=>[g(m(i.formatPrice(f.price)),1)]),_:2},1024),n(Y,null,{default:l(()=>[n(B,{class:"btn btn-sm btn-success mx-2",onClick:z=>i.editPrice(f.price,f.id)},{default:l(()=>[ae]),_:2},1032,["onClick"]),n(B,{class:"btn btn-sm btn-danger",onClick:z=>i.removePrice(f.id)},{default:l(()=>[le]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(P,{lg:"12"},{default:l(()=>[n(O,{price:o.prices},null,8,["price"])]),_:1}),n(P,{lg:"12"},{default:l(()=>[n(j)]),_:1}),n(I,{modelValue:o.showModal,"onUpdate:modelValue":e[2]||(e[2]=f=>o.showModal=f),"hide-footer":"",centered:"","header-class":"border-0"},{default:l(()=>[t("div",se,[ie,n(L,{class:"justify-content-center"},{default:l(()=>[n(P,{xl:"10"},{default:l(()=>[re,n(T,{class:"mb-3",label:"Biaya","label-for":"formrow-firstname-input"},{default:l(()=>[n(C,{id:"formrow-firstname-input",type:"number",modelValue:o.form.price,"onUpdate:modelValue":e[1]||(e[1]=f=>o.form.price=f),placeholder:"Enter Your Price"},null,8,["modelValue"]),n(B,{class:"mt-2 btn btn-sm btn-info",onClick:i.update},{default:l(()=>[g("Update")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),_:1}),n(L)]),_:1})}const We=R(ne,[["render",de]]);export{We as default};
