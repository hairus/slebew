import{L as U}from"./main-dc2e1d31.js";import{a as c}from"./axios-dd1c8fc2.js";import{_ as k,r as h,o as l,i as r,a as e,F as u,k as _,b as m,w as p,s as x,v as y,z as g,t as i,c as $,x as B}from"../js/app2.js";import"./logo-light-9f0efe74.js";import"./logo-9faa3827.js";import"./avatar-1-15b743f1.js";import"./avatar-3-36dc574b.js";const C={name:"userRole",props:["roles"],data(){return{showModal:!1,users:[],user_id:"",role_id:""}},methods:{async createuserRole(){await c.post("/api/admin/role",{user_id:this.user_id,role_id:this.role_id}).then(n=>{this.showModal=!1,this.getUser()})},async getUser(){await c.get("/api/admin/user").then(n=>{this.users=n.data})},async hapusRole(n,t){await c.delete("/api/admin/user/"+n+"/"+t).then(b=>{this.getUser()})},muncul(){this.showModal=!0}},created(){this.getUser()}},V={class:"row"},S={class:"card"},L=e("div",{class:"card-header"},[e("div",{class:"card-title"}," User Role ")],-1),N={class:"card-body"},D={class:"table-responsive"},F=e("span",{class:"fa fa-plus"},null,-1),P=[F],j={class:"table table-hover"},z=e("thead",null,[e("th",null,"No"),e("th",null,"Nama"),e("th",null,"Role"),e("th",null,"#")],-1),A=["onClick"],E=e("td",null,[e("button",{class:"btn btn-sm btn-secondary"},[e("span",{class:"fa fa-pencil-alt"})])],-1),T={class:"text-center mb-4"},q=e("h4",{class:"text-primary"},"Add User Role",-1),G={class:"form-group"},H=e("label",{for:""},"Pilih Role",-1),I=["value"],J={class:"form-group"},K=e("label",{for:""},"Pilih User",-1),O=["value"],Q=e("button",{class:"btn btn-sm btn-info"},"Submit",-1);function W(n,t,b,M,o,a){const f=h("BCol"),v=h("BRow"),d=h("BModal");return l(),r("div",null,[e("div",V,[e("div",S,[L,e("div",N,[e("div",D,[e("button",{class:"btn btn-info float-end my-3",onClick:t[0]||(t[0]=(...s)=>a.muncul&&a.muncul(...s))},P),e("table",j,[z,e("tbody",null,[(l(!0),r(u,null,_(o.users,(s,R)=>(l(),r("tr",{key:s.id},[e("td",null,i(R+1),1),e("td",null,i(s.name),1),e("td",null,[(l(!0),r(u,null,_(s.roles,w=>(l(),r("span",{onClick:Re=>a.hapusRole(s.id,w.id),class:"bg rounded-pill bg-info text-white",role:"button"},i(w.role),9,A))),256))]),E]))),128))])])])])])]),m(d,{modelValue:o.showModal,"onUpdate:modelValue":t[4]||(t[4]=s=>o.showModal=s),"hide-footer":"",centered:"","header-class":"border-0"},{default:p(()=>[e("div",T,[m(v,{class:"justify-content-center"},{default:p(()=>[m(f,null,{default:p(()=>[q,e("form",{action:"",onSubmit:t[3]||(t[3]=x((...s)=>a.createuserRole&&a.createuserRole(...s),["prevent"]))},[e("div",G,[H,y(e("select",{class:"form-control mb-3","onUpdate:modelValue":t[1]||(t[1]=s=>o.role_id=s)},[(l(!0),r(u,null,_(b.roles,s=>(l(),r("option",{key:s.id,value:s.id},i(s.role),9,I))),128))],512),[[g,o.role_id]])]),e("div",J,[K,y(e("select",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=s=>o.user_id=s)},[(l(!0),r(u,null,_(o.users,s=>(l(),r("option",{key:s.id,value:s.id},i(s.name),9,O))),128))],512),[[g,o.user_id]])]),Q],32)]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}const X=k(C,[["render",W]]),Y={components:{Layout:U,userRole:X},data(){return{role:"",roles:[],users:[]}},methods:{async createRole(){await c.post("/api/admin/role",{role:this.role}).then(n=>{this.role="",this.getRoles()})},async getRoles(){await c.get("/api/admin/role").then(n=>{this.roles=n.data})},async hapus(n){await c.delete("/api/admin/role/"+n).then(t=>{this.getRoles()})},async createuserRole(){}},mounted(){this.getRoles()}},Z={class:"row"},ee={class:"col-md-12"},se={class:"row"},te={class:"col-md-6"},oe={class:"card"},le=e("div",{class:"card-header"},[e("div",{class:"card-title"},"Management Role")],-1),ne={class:"card-body"},re={class:"form-group"},ae=e("label",{for:""},"Create Role",-1),de=e("button",{class:"btn btn-sm btn-primary mt-3"},"Submit",-1),ie={class:"col-md-6"},ce={class:"card"},ue=e("div",{class:"card-header"},[e("div",{class:"card-title"},"Role")],-1),_e={class:"card-body"},he={class:"table table-bordered"},me=e("thead",null,[e("th",null,"No"),e("th",null,"Role"),e("th",null,"#")],-1),pe=["onClick"],be=e("span",{class:"fa fa-trash-alt"},null,-1),fe=[be],ve=e("hr",null,null,-1);function ye(n,t,b,M,o,a){const f=h("user-role"),v=h("Layout");return l(),$(v,null,{default:p(()=>[e("div",Z,[e("div",ee,[e("div",se,[e("div",te,[e("div",oe,[le,e("div",ne,[e("form",{action:"",onSubmit:t[1]||(t[1]=x((...d)=>a.createRole&&a.createRole(...d),["prevent"]))},[e("div",re,[ae,y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=d=>o.role=d)},null,512),[[B,o.role]])]),de],32)])])]),e("div",ie,[e("div",ce,[ue,e("div",_e,[e("table",he,[me,e("tbody",null,[(l(!0),r(u,null,_(o.roles,(d,s)=>(l(),r("tr",{key:d.id},[e("td",null,i(s+1),1),e("td",null,i(d.role),1),e("td",null,[e("button",{class:"btn btn-sm btn-danger",onClick:R=>a.hapus(d.id)},fe,8,pe)])]))),128))])])])])])])])]),ve,m(f,{roles:o.roles},null,8,["roles"])]),_:1})}const Be=k(Y,[["render",ye]]);export{Be as default};
