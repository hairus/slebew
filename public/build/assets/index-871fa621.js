import{L as D}from"./main-dc2e1d31.js";import{P as N}from"./page-header-1e01951d.js";import{a as _}from"./axios-dd1c8fc2.js";import{C as S}from"./flatpickr-22e2cb3c.js";import{_ as L,i as d,b as a,w as n,r as i,o as u,d as c,a as t,t as r,q as H,v as p,z as h,F as f,k,x as K}from"../js/app2.js";import"./logo-light-9f0efe74.js";import"./logo-9faa3827.js";import"./avatar-1-15b743f1.js";import"./avatar-3-36dc574b.js";const T={data(){return{user:JSON.parse(localStorage.getItem("user")),ptk:null,mapels:[],kelas:[],reports:[],mapel_id:"",kelas_id:null,mapel_id:"",kelas_id:"",dari:"",sampai:"",ket:"",desk:""}},methods:{async getPtk(){await _.get("/api/guru/ijin").then(l=>{this.ptk=l.data})},async getMapels(){await _.get("/api/guru/getMapels").then(l=>{this.mapels=l.data})},async getkelas(){await _.get("/api/guru/getGuruKelas").then(l=>{this.kelas=l.data,this.kelas.sort((s,g)=>s.rombels.nama.localeCompare(g.rombels.nama))})},async simpan(){await _.post("/api/guru/simI",{mapel_id:this.mapel_id,kelas_id:this.kelas_id,dari:this.dari,sampai:this.sampai,ket:this.ket,desk:this.desk}).then(l=>{console.log(l)}).catch(l=>{console.log(l,"error")})},async getMe(){await _.post("/api/guru/me",{user_id:this.user.user_id}).then(l=>{this.reports=l.data}).catch(l=>{console.log(l)})},async hapus(l){confirm("yakin menghapus ?")&&await _.delete("/api/guru/del/"+l).then(s=>{this.getMe()})}},components:{Layout:D,PageHeader:N,flatPickr:S},created(){this.getPtk(),this.getMapels(),this.getMe()}},I={key:0},F={class:"btn btn-md btn-outline-primary me-2",type:"button"},R={class:"row"},q={class:"form-group mt-5 col-6"},z=t("label",null,"Pilih mapel",-1),A=t("option",{value:""},"---",-1),E=["value"],G={class:"form-group mt-5 col-6"},J=t("label",null,"Pilih Kelas",-1),O=t("option",{value:""},"---",-1),Q=["value"],W={class:"form-group mt-3 col-6"},X=t("label",{for:""},"Dari",-1),Y={class:"form-group mt-3 col-6"},Z=t("label",{for:""},"Sampai",-1),$={class:"form-group mt-3"},tt=t("label",null,"Pilih Keterangan",-1),et=t("option",{value:"ijin"},"Ijin",-1),st=t("option",{value:"sakit"},"Sakit",-1),ot=t("option",{value:"dl"},"Dinas Luar",-1),lt=[et,st,ot],at={class:"form-group mt-3"},nt=t("label",null,"Deskripsi Tugas",-1),it={class:"table-responsive"},rt={class:"table table-hover"},dt=t("thead",null,[t("th",null,"No"),t("th",null,"Nama"),t("th",null,"Ket"),t("th",null,"Kelas"),t("th",null,"Dari"),t("th",null,"Sampai"),t("th",null,"Desk"),t("th",null,"#")],-1),ut={style:{width:"10%"}},_t=["onClick"],mt=t("span",{class:"fa fa-trash"},null,-1),pt=[mt];function ct(l,s,g,ht,o,m){const B=i("H5"),w=i("BCardTitle"),V=i("BCardHeader"),b=i("flat-pickr"),v=i("BCardBody"),y=i("BCard"),x=i("BCol"),C=i("BBadge"),P=i("bCol"),M=i("BRow"),U=i("Layout");return u(),d("div",null,[a(U,null,{default:n(()=>[a(M,null,{default:n(()=>[a(x,{lg:"6"},{default:n(()=>[a(y,{"no-body":""},{default:n(()=>[a(V,null,{default:n(()=>[a(w,null,{default:n(()=>[a(B,null,{default:n(()=>[c("Apps Perijinan")]),_:1})]),_:1})]),_:1}),a(v,null,{default:n(()=>[o.ptk?(u(),d("div",I,[t("button",F,r(o.ptk.nama.toUpperCase()),1)])):H("",!0),t("div",R,[t("div",q,[z,p(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>o.mapel_id=e),class:"form-control",onChange:s[1]||(s[1]=(...e)=>m.getkelas&&m.getkelas(...e))},[A,(u(!0),d(f,null,k(o.mapels,e=>(u(),d("option",{key:e.mata_pelajaran_id,value:e.mata_pelajaran_id},r(e.mata_pelajaran_id_str),9,E))),128))],544),[[h,o.mapel_id]])]),t("div",G,[J,p(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>o.kelas_id=e),class:"form-control"},[O,(u(!0),d(f,null,k(o.kelas,e=>(u(),d("option",{key:e.rb_id,value:e.rb_id},r(e.rombels.nama),9,Q))),128))],512),[[h,o.kelas_id]])]),t("div",W,[X,a(b,{modelValue:o.dari,"onUpdate:modelValue":s[3]||(s[3]=e=>o.dari=e),"first-day-of-week":1,lang:"en",confirm:"",class:"form-control"},null,8,["modelValue"])]),t("div",Y,[Z,a(b,{modelValue:o.sampai,"onUpdate:modelValue":s[4]||(s[4]=e=>o.sampai=e),"first-day-of-week":1,lang:"en",confirm:"",class:"form-control"},null,8,["modelValue"])]),t("div",$,[tt,p(t("select",{"onUpdate:modelValue":s[5]||(s[5]=e=>o.ket=e),class:"form-control"},lt,512),[[h,o.ket]])]),t("div",at,[nt,p(t("textarea",{"onUpdate:modelValue":s[6]||(s[6]=e=>o.desk=e),type:"text",class:"form-control"},null,512),[[K,o.desk]])])]),t("button",{class:"btn btn-primary mt-3",onClick:s[7]||(s[7]=(...e)=>m.simpan&&m.simpan(...e))}," simpan ")]),_:1})]),_:1})]),_:1}),a(P,{lg:"6"},{default:n(()=>[a(y,{"np-body":""},{default:n(()=>[a(v,null,{default:n(()=>[t("div",it,[t("table",rt,[dt,t("tbody",null,[(u(!0),d(f,null,k(o.reports,(e,j)=>(u(),d("tr",{key:e.id},[t("td",null,r(j+1),1),t("td",null,[a(C,{variant:"primary"},{default:n(()=>[c(r(e.user.name),1)]),_:2},1024)]),t("td",null,[a(C,{variant:"success"},{default:n(()=>[c(r(e.ket.toUpperCase()),1)]),_:2},1024)]),t("td",ut,r(e.kelas.nama),1),t("td",null,r(e.dari),1),t("td",null,r(e.sampai),1),t("td",null,r(e.desk),1),t("td",null,[t("button",{class:"btn btn-sm btn-danger",onClick:ft=>m.hapus(e.id)},pt,8,_t)])]))),128))])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const xt=L(T,[["render",ct]]);export{xt as default};
