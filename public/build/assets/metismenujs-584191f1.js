/*!
* metismenujs - v1.4.0
* MetisMenu: Collapsible menu plugin with Vanilla-JS
* https://github.com/onokumus/metismenujs#readme
*
* Made by Osman Nuri Okumus <onokumus@gmail.com> (https://github.com/onokumus)
* Under MIT License
*/const L={parentTrigger:"li",subMenu:"ul",toggle:!0,triggerElement:"a"},h={ACTIVE:"mm-active",COLLAPSE:"mm-collapse",COLLAPSED:"mm-collapsed",COLLAPSING:"mm-collapsing",METIS:"metismenu",SHOW:"mm-show"};class u{constructor(t,s){this.element=u.isElement(t)?t:document.querySelector(t),this.config=Object.assign(Object.assign({},L),s),this.disposed=!1,this.triggerArr=[],this.boundEventHandler=this.clickEvent.bind(this),this.init()}static attach(t,s){return new u(t,s)}init(){const{METIS:t,ACTIVE:s,COLLAPSE:i}=h;this.element.classList.add(t);const l=[...this.element.querySelectorAll(this.config.subMenu)];l.length!==0&&l.forEach(r=>{r.classList.add(i);const o=r.closest(this.config.parentTrigger);o!=null&&o.classList.contains(s)?this.show(r):this.hide(r);const e=o==null?void 0:o.querySelector(this.config.triggerElement);(e==null?void 0:e.getAttribute("aria-disabled"))!=="true"&&(e==null||e.setAttribute("aria-expanded","false"),e==null||e.addEventListener("click",this.boundEventHandler),this.triggerArr.push(e))})}clickEvent(t){if(!this.disposed){const s=t==null?void 0:t.currentTarget;s&&s.tagName==="A"&&t.preventDefault();const i=s.closest(this.config.parentTrigger),l=i==null?void 0:i.querySelector(this.config.subMenu);this.toggle(l)}}update(){this.disposed=!1,this.init()}dispose(){this.triggerArr.forEach(t=>{t.removeEventListener("click",this.boundEventHandler)}),this.disposed=!0}on(t,s,i){return this.element.addEventListener(t,s,i),this}off(t,s,i){return this.element.removeEventListener(t,s,i),this}emit(t,s,i=!1){const l=new CustomEvent(t,{bubbles:i,detail:s});this.element.dispatchEvent(l)}toggle(t){const s=t.closest(this.config.parentTrigger);s!=null&&s.classList.contains(h.ACTIVE)?this.hide(t):this.show(t)}show(t){var s;const i=t,{ACTIVE:l,COLLAPSE:r,COLLAPSED:o,COLLAPSING:e,SHOW:a}=h;if(this.isTransitioning||i.classList.contains(e))return;const c=()=>{i.classList.remove(e),i.style.height="",i.removeEventListener("transitionend",c),this.setTransitioning(!1),this.emit("shown.metisMenu",{shownElement:i})},n=i.closest(this.config.parentTrigger);n==null||n.classList.add(l);const d=n==null?void 0:n.querySelector(this.config.triggerElement);d==null||d.setAttribute("aria-expanded","true"),d==null||d.classList.remove(o),i.style.height="0px",i.classList.remove(r),i.classList.remove(a),i.classList.add(e);const v=[].slice.call((s=n==null?void 0:n.parentNode)===null||s===void 0?void 0:s.children).filter(g=>g!==n);this.config.toggle&&v.length>0&&v.forEach(g=>{const m=g.querySelector(this.config.subMenu);m&&this.hide(m)}),this.setTransitioning(!0),i.classList.add(r),i.classList.add(a),i.style.height=`${i.scrollHeight}px`,this.emit("show.metisMenu",{showElement:i}),i.addEventListener("transitionend",c)}hide(t){const{ACTIVE:s,COLLAPSE:i,COLLAPSED:l,COLLAPSING:r,SHOW:o}=h,e=t;if(this.isTransitioning||!e.classList.contains(o))return;this.emit("hide.metisMenu",{hideElement:e});const a=e.closest(this.config.parentTrigger);a==null||a.classList.remove(s);const c=()=>{e.classList.remove(r),e.classList.add(i),e.style.height="",e.removeEventListener("transitionend",c),this.setTransitioning(!1),this.emit("hidden.metisMenu",{hiddenElement:e})};e.style.height=`${e.getBoundingClientRect().height}px`,e.style.height=`${e.offsetHeight}px`,e.classList.add(r),e.classList.remove(i),e.classList.remove(o),this.setTransitioning(!0),e.addEventListener("transitionend",c),e.style.height="0px";const n=a==null?void 0:a.querySelector(this.config.triggerElement);n==null||n.setAttribute("aria-expanded","false"),n==null||n.classList.add(l)}setTransitioning(t){this.isTransitioning=t}static isElement(t){return!!t.classList}}export{u as M};
