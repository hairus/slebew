import{L as x}from"./main-26e9ec71.js";import{a as g}from"./axios-dd1c8fc2.js";import"./vue-4b54ea58.js";import{_ as y}from"../js/app2.js";import{N as C,K as _,a7 as k,a as i,e,b as p,g as V,F as D,f as M,l as u,k as d,p as m,n as c,t as a,h,al as E,am as O}from"./@vue-26c81de9.js";import"./simplebar-vue-28197e1a.js";import"./simplebar-core-3f5973b9.js";import"./lodash-es-9b1d07da.js";import"./logo-9faa3827.js";import"./metismenujs-584191f1.js";import"./vue-router-04b37a5f.js";import"./figlet-aa9a71dd.js";import"./vue3-apexcharts-fb268ad8.js";import"./maska-1eacf752.js";import"./vue-i18n-74a42a2b.js";import"./@intlify-28f1e2f7.js";import"./bootstrap-vue-next-71fdbf68.js";import"./gitart-vue-dialog-9c3bddb2.js";/* empty css                 */const S={components:{Layout:x},data(){return{isOpen:!1,editModal:!1,cp:{id:null,mapel:"",semester:"",tingkat:""},cpData:[],hasError:!1,errorMessages:{mapel:[],semester:[],tingkat:[]}}},watch:{"cp.mapel"(o,t){this.errorMessages.mapel.length&&(this.errorMessages.mapel=[])},"cp.semester"(o,t){this.errorMessages.semester.length&&(this.errorMessages.semester=[])},"cp.tingkat"(o,t){this.errorMessages.tingkat.length&&(this.errorMessages.tingkat=[])}},mounted(){this.getDatas()},methods:{preventHide(o){this.hasError&&o.preventDefault()},handleOk(o){this.createCp(o)},handleUpdateOk(o){this.updateCp(o)},createCp(o){if(o.preventDefault(),!Number.isInteger(Number(this.cp.semester))){this.errorMessages.semester=["Semester harus berupa angka."],this.hasError=!0;return}g.post("/api/admin/cp",this.cp).then(()=>{this.isOpen=!1,this.hasError=!1,this.clearErrors(),this.cp={id:"",mapel:"",semester:"",tingkat:""},this.getDatas()}).catch(t=>{this.hasError=!0,this.errorMessages=t.response.data.errors,console.log(this.errorMessages)})},updateCp(o){if(o.preventDefault(),!Number.isInteger(Number(this.cp.semester))){this.errorMessages.semester=["Semester harus berupa angka."],this.hasError=!0;return}g.put(`/api/admin/cp/${this.cp.id}`,this.cp).then(()=>{this.editModal=!1,this.hasError=!1,this.clearErrors(),this.cp={id:"",mapel:"",semester:"",tingkat:""},this.getDatas()}).catch(t=>{this.hasError=!0,this.errorMessages=t.response.data.errors,console.log(this.errorMessages)})},getDatas(){g.get("/api/admin/cp").then(o=>{this.cpData=o.data.data}).catch(o=>{console.log(o)})},deleteById(o){confirm("Are you sure to delete this data?")&&g.delete(`/api/admin/cp/${o}`).then(()=>{this.getDatas()}).catch(t=>{console.log(t)})},editCp(o){this.cp={...o},this.editModal=!0},clear(){this.editModal=!1,this.isOpen=!1,this.clearErrors(),this.cp={id:"",mapel:"",semester:"",tingkat:""}},clearErrors(){this.errorMessages={mapel:[],semester:[],tingkat:[]}}}},n=o=>(E("data-v-731dcb13"),o=o(),O(),o),B={class:"row"},N={class:"col-md-6"},U={class:"card"},w={class:"card-body"},A=n(()=>e("div",{class:"card-title mb-4"},"CP Kontrol",-1)),I={class:"table"},L=n(()=>e("thead",null,[e("th",null,"No"),e("th",null,"Mapel"),e("th",null,"Semester"),e("th",null,"Tingkat"),e("th",null,"Aksi")],-1)),T={class:"cursor-pointer"},H=["onClick"],F=n(()=>e("i",{class:"bx bx-trash text-danger"},null,-1)),K=[F],P=["onClick"],j=n(()=>e("i",{class:"bx bx-edit-alt text-primary"},null,-1)),z=[j],J={class:"form-group"},R=n(()=>e("label",{for:"mapel"},"Mapel",-1)),q={key:0,class:"ms-2 text-danger"},G={class:"form-group"},Q=n(()=>e("label",{for:"semester"},"Semester",-1)),W={key:0,class:"ms-2 text-danger"},X={class:"form-group"},Y=n(()=>e("label",{for:"tingkat"},"Tingkat",-1)),Z={key:0,class:"ms-2 text-danger"},$={class:"form-group"},ee=n(()=>e("label",{for:"mapel"},"Mapel",-1)),se={key:0,class:"ms-2 text-danger"},te={class:"form-group"},re=n(()=>e("label",{for:"semester"},"Semester",-1)),oe={key:0,class:"ms-2 text-danger"},le={class:"form-group"},ae=n(()=>e("label",{for:"tingkat"},"Tingkat",-1)),ne={key:0,class:"ms-2 text-danger"};function ie(o,t,pe,de,s,l){const f=k("BModal"),b=k("Layout");return i(),C(b,null,{default:_(()=>[e("div",null,[e("div",B,[e("div",N,[e("div",U,[e("div",w,[A,e("button",{class:"btn btn-sm btn-primary float-end mb-3",onClick:t[0]||(t[0]=r=>s.isOpen=!0)}," Add "),e("table",I,[L,e("tbody",null,[(i(!0),p(D,null,V(s.cpData,r=>(i(),p("tr",{key:r.id},[e("td",null,a(r.id),1),e("td",null,a(r.mapel),1),e("td",null,a(r.semester),1),e("td",null,a(r.tingkat),1),e("td",T,[e("button",{class:"btn",onClick:v=>l.deleteById(r.id)},K,8,H),e("button",{onClick:v=>l.editCp(r),class:"btn"},z,8,P)])]))),128))])])])])]),M(f,{modelValue:s.isOpen,"onUpdate:modelValue":t[5]||(t[5]=r=>s.isOpen=r),id:"modal-standard",title:"ADD CAPAIAN BELAJAR","title-class":"font-18",onOk:l.handleOk,onHide:t[6]||(t[6]=u(()=>{},["prevent"])),onCancel:l.clear},{default:_(()=>[e("form",{onSubmit:t[4]||(t[4]=u((...r)=>l.createCp&&l.createCp(...r),["prevent"]))},[e("div",J,[R,d(e("input",{type:"text",class:c(["form-control",{"is-invalid":s.errorMessages.mapel.length}]),"onUpdate:modelValue":t[1]||(t[1]=r=>s.cp.mapel=r)},null,2),[[m,s.cp.mapel]]),s.errorMessages.mapel.length?(i(),p("span",q,a(s.errorMessages.mapel[0]),1)):h("",!0)]),e("div",G,[Q,d(e("input",{type:"text",class:c(["form-control",{"is-invalid":s.errorMessages.semester.length}]),"onUpdate:modelValue":t[2]||(t[2]=r=>s.cp.semester=r)},null,2),[[m,s.cp.semester]]),s.errorMessages.semester.length?(i(),p("span",W,a(s.errorMessages.semester[0]),1)):h("",!0)]),e("div",X,[Y,d(e("input",{type:"text",class:c(["form-control",{"is-invalid":s.errorMessages.tingkat.length}]),"onUpdate:modelValue":t[3]||(t[3]=r=>s.cp.tingkat=r)},null,2),[[m,s.cp.tingkat]]),s.errorMessages.tingkat.length?(i(),p("span",Z,a(s.errorMessages.tingkat[0]),1)):h("",!0)])],32)]),_:1},8,["modelValue","onOk","onCancel"]),M(f,{modelValue:s.editModal,"onUpdate:modelValue":t[11]||(t[11]=r=>s.editModal=r),id:"modal-standard",title:"Edit Capaian Belajar","title-class":"font-18",onOk:l.handleUpdateOk,onHide:t[12]||(t[12]=u(()=>{},["prevent"])),onCancel:l.clear},{default:_(()=>[e("form",{onSubmit:t[10]||(t[10]=u((...r)=>l.updateCp&&l.updateCp(...r),["prevent"]))},[e("div",$,[ee,d(e("input",{type:"text",class:c(["form-control",{"is-invalid":s.errorMessages.mapel.length}]),"onUpdate:modelValue":t[7]||(t[7]=r=>s.cp.mapel=r)},null,2),[[m,s.cp.mapel]]),s.errorMessages.mapel.length?(i(),p("span",se,a(s.errorMessages.mapel[0]),1)):h("",!0)]),e("div",te,[re,d(e("input",{type:"text",class:c(["form-control",{"is-invalid":s.errorMessages.semester.length}]),"onUpdate:modelValue":t[8]||(t[8]=r=>s.cp.semester=r)},null,2),[[m,s.cp.semester]]),s.errorMessages.semester.length?(i(),p("span",oe,a(s.errorMessages.semester[0]),1)):h("",!0)]),e("div",le,[ae,d(e("input",{type:"text",class:c(["form-control",{"is-invalid":s.errorMessages.tingkat.length}]),"onUpdate:modelValue":t[9]||(t[9]=r=>s.cp.tingkat=r)},null,2),[[m,s.cp.tingkat]]),s.errorMessages.tingkat.length?(i(),p("span",ne,a(s.errorMessages.tingkat[0]),1)):h("",!0)])],32)]),_:1},8,["modelValue","onOk","onCancel"])])])]),_:1})}const Be=y(S,[["render",ie],["__scopeId","data-v-731dcb13"]]);export{Be as default};
