import"./vue-e44c720a.js";import{r as d,ac as te,d as E,c as u,w as g,ad as X,E as k,y as ne,O as T,o as Z,I as J,ae as z,a as f,b as S,x as C,a0 as oe,a1 as ae,F as M,M as y,h as O,T as P,f as K,_ as B,W as re,a8 as le,af as se,n as $,i as W,a2 as Q,k as ie,e as ue,q as de}from"./@vue-2f47e84f.js";const D=typeof window<"u";function w(e,t="px"){if(!(e==null||e===""))return isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${t}`:void 0}const ce=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["auto","scroll"].includes(t.overflowY)&&e.scrollHeight>e.clientHeight},fe=(e,t)=>e.scrollTop===0&&t<0?!0:e.scrollTop+e.clientHeight===e.scrollHeight&&t>0,me=(e,t)=>{const n=e.composedPath(),o=e.deltaY;for(let a=0;a<n.length;a++){const r=n[a];if(r===document||r===document.documentElement||r===t)return!0;if(ce(r))return fe(r,o)}return!0},ve=()=>{const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll";const t=document.createElement("div");e.appendChild(t),document.body.appendChild(e);const n=e.offsetWidth-t.offsetWidth;return document.body.removeChild(e),n},p=d([]);function ge(e){const t=T();let n;return g(e,a=>{a?(n=re(),n.run(()=>{p.value.push(t),le(()=>{const r=p.value.indexOf(t);p.value.splice(r,1)})})):n==null||n.stop()},{immediate:!0}),{isTop:u(()=>se(p.value[p.value.length-1])===t)}}const b=d([]),he=1e3;function pe(e){const t=T().uid,n=d(0);return g(e,o=>{o?(b.value.push(t),n.value=he+(b.value.indexOf(t)+1)*2):b.value=b.value.filter(a=>a!==t)},{immediate:!0}),{zIndex:n}}const ye=e=>{const t=d(!1),n=d(!1);return e.value&&(t.value=!0,k(()=>{n.value=!0})),g(e,o=>{if(!t.value){t.value=!0,k(()=>{n.value=o});return}n.value=o}),{activatedOnce:t,active:n}},be=({overlay:e,content:t,contentActiveClass:n,fullscreen:o,contentFullscreenClass:a})=>{if(!D)return{disableScroll:()=>{},enableScroll:()=>{}};let r=!1,l;const i=c=>{(c.target===e.value||c.target===document.body||me(c,t.value))&&c.preventDefault()},v=ve()===0;return{disableScroll:()=>{r||(v||o?(l="byOverflow",document.documentElement.classList.add("overflow-y-hidden")):(l="byEvents",window.addEventListener("wheel",i,{passive:!1})),r=!0)},enableScroll:()=>{if(r){if(l==="byEvents")window.removeEventListener("wheel",i);else if(l==="byOverflow"){const c=document.getElementsByClassName(n),q=document.getElementsByClassName(a);(!v&&o&&q.length===1||c.length===1)&&document.documentElement.classList.remove("overflow-y-hidden")}r=!1}}}};function we(e,t,n){Z(()=>{window.addEventListener(e,t,n)}),J(()=>{window.removeEventListener(e,t)})}var N=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n};const _=E({name:"GDialogOverlay",props:{active:{type:Boolean,required:!0},zIndex:{type:Number,required:!0},background:{type:[Boolean,String],required:!0},local:{type:Boolean,required:!0}},emits:["click"],setup(e,{emit:t}){const n=u(()=>({zIndex:e.zIndex-1})),o=d(e.active),a=d(!1);g(()=>e.active,h=>{if(a.value=!h,h){o.value=!0;return}k(()=>{o.value=!1})});const r=u(()=>["g-dialog-overlay",{"g-dialog-overlay--active":!a.value,"g-dialog-overlay--local":e.local}]),l=u(()=>typeof e.background=="string"?e.background:e.background?"var(--overlay-bg)":"transparent");return{activeProxy:o,styles:n,classes:r,computedBackground:l,onClick:()=>{t("click")}}}}),H=()=>{X(e=>({"6eaca59a":e.computedBackground}))},U=_.setup;_.setup=U?(e,t)=>(H(),U(e,t)):H;const ke=_;function Se(e,t,n,o,a,r){return f(),y(Q,{name:"fade"},{default:B(()=>[e.activeProxy?(f(),S("div",{key:0,class:$(e.classes),style:W(e.styles),onClick:t[0]||(t[0]=(...l)=>e.onClick&&e.onClick(...l))},null,6)):O("",!0)]),_:1})}var Ce=N(ke,[["render",Se]]);const Be=e=>({sizeStyles:u(()=>({maxWidth:e.maxWidth==="none"?void 0:w(e.maxWidth),width:e.width==="auto"?void 0:w(e.width),height:e.height==="auto"?void 0:w(e.height)}))}),A=E({name:"GDialogContent",props:{background:{type:[Boolean,String],required:!0},borderRadius:{type:[Boolean,Number,String],required:!0},class:{type:String,required:!0},depressed:{type:Boolean,required:!0},fullscreen:Boolean,height:{type:[String,Number],required:!0},maxWidth:{type:[String,Number],required:!0},scrollable:{type:Boolean,required:!0},width:{type:[String,Number],required:!0}},setup(e){const{sizeStyles:t}=Be(e),n=u(()=>["g-dialog-content",e.class,{"g-dialog-content--scrollable":e.scrollable,"g-dialog-content--depressed":e.depressed,"g-dialog-content--fullscreen":e.fullscreen}]),o=u(()=>typeof e.background=="string"?e.background:e.background?"var(--content-bg)":"transparent"),a=u(()=>typeof e.borderRadius=="string"?w(e.borderRadius):e.borderRadius?"var(--content-border-radius)":"0");return{styles:t,classes:n,computedBackground:o,computedBorderRadius:a}}}),j=()=>{X(e=>({"889a571a":e.computedBackground,"023a843a":e.computedBorderRadius}))},Y=A.setup;A.setup=Y?(e,t)=>(j(),Y(e,t)):j;const $e=A;function Ee(e,t,n,o,a,r){return f(),S("div",{class:$(e.classes),style:W(e.styles)},[C(e.$slots,"default")],6)}var Ne=N($e,[["render",Ee]]);const qe=E({name:"GDialogFrame",components:{GDialogContent:Ne},inheritAttrs:!1,props:{isActive:{type:Boolean,required:!0},zIndex:{type:Number,required:!0},background:{type:[Boolean,String],required:!0},borderRadius:{type:[Boolean,Number,String],required:!0},contentClass:{type:String,required:!0},depressed:{type:Boolean,required:!0},fullscreen:{type:Boolean,required:!0},height:{type:[String,Number],required:!0},local:{type:Boolean,required:!0},maxWidth:{type:[String,Number],required:!0},scrollable:{type:Boolean,required:!0},transition:{type:String,required:!0},width:{type:[String,Number],required:!0}},setup(e){const t=d(),n=()=>{var r,l;(l=(r=t.value)==null?void 0:r.animate)==null||l.call(r,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})},o=u(()=>["g-dialog-frame",{"g-dialog-frame--active":e.isActive,"g-dialog-frame--local":e.local}]),a=u(()=>({zIndex:e.zIndex}));return{frameElement:t,classes:o,styles:a,animateClick:n}}});function ze(e,t,n,o,a,r){const l=z("GDialogContent");return f(),y(Q,{name:e.transition},{default:B(()=>[ie(ue("div",{ref:"frameElement",class:$(e.classes),style:W(e.styles)},[K(l,{class:$(e.contentClass),"max-width":e.maxWidth,width:e.width,height:e.height,scrollable:e.scrollable,depressed:e.depressed,fullscreen:e.fullscreen,background:e.background,"border-radius":e.borderRadius},{default:B(()=>[C(e.$slots,"default")]),_:3},8,["class","max-width","width","height","scrollable","depressed","fullscreen","background","border-radius"])],6),[[de,e.isActive]])]),_:3},8,["name"])}var Oe=N(qe,[["render",ze]]);const De=E({name:"GDialog",components:{GDialogOverlay:Ce,GDialogFrame:Oe},inheritAttrs:!1,props:{background:{type:[Boolean,String],default:!0},borderRadius:{type:[Boolean,Number,String],default:!0},contentClass:{type:String,default:""},depressed:Boolean,fullscreen:Boolean,height:{type:[String,Number],default:"auto"},local:Boolean,maxWidth:{type:[String,Number],default:"none"},modelValue:{type:Boolean,default:void 0},noClickAnimation:Boolean,overlayBackground:{type:[Boolean,String],default:!0},persistent:Boolean,scrollable:Boolean,teleportTo:{type:String,default:"body"},disableTeleport:Boolean,transition:{type:String,default:"g-dialog-transition"},width:{type:[String,Number],default:"auto"},closeOnBack:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0},setup(e,{emit:t}){const n=d(null),o=d(null),a=u(()=>{var s;return(s=n.value)==null?void 0:s.$el}),r=u(()=>{var s;return(s=o.value)==null?void 0:s.$el}),l=e.modelValue!==void 0,i=d(!1);g(()=>e.modelValue,s=>{i.value=!!s});const{isTop:h}=ge(i);D&&e.modelValue&&k(()=>{i.value=!0});const v=()=>{l||(i.value=!1),t("update:modelValue",!1)},G=()=>{l||(i.value=!1),t("update:modelValue",!0)},{activatedOnce:I,active:c}=ye(i),{zIndex:q}=pe(c),R=()=>{var s;e.noClickAnimation||(s=o.value)==null||s.animateClick()};we("keyup",s=>{s.key==="Escape"&&h.value&&(e.persistent?R():v())},{passive:!0});const{enableScroll:V,disableScroll:x}=be({overlay:a,content:r,contentActiveClass:"g-dialog-frame--active",fullscreen:e.fullscreen,contentFullscreenClass:"g-dialog-frame--fullscreen"});g(c,s=>{e.local||(s?x():V())}),ne(()=>{V()});const ee=()=>{e.persistent?R():v()};if(D&&e.closeOnBack){const s=T();let m=`dialog-${s.uid}`;window.location.hash&&(m=`${window.location.hash.slice(1)}-${m}`);const L=()=>{window.location.hash.includes(m)||!i.value||v()};Z(()=>{i.value&&(window.location.hash=m),window.addEventListener("popstate",L)}),J(()=>{window.removeEventListener("popstate",L)}),g(i,F=>{!F&&window.location.hash.includes(m)?window.history.back():F&&(window.location.hash?m=`${window.location.hash.slice(1)}-${`dialog-${s.uid}`}`:m=`dialog-${s.uid}`,window.location.hash=`#${m}`)})}return{overlayComponent:n,frameComponent:o,activatedOnce:I,zIndex:q,isActive:c,activatorAttrs:{onClick(){G()}},onClickOutside:ee,onClose:v}}});function Te(e,t,n,o,a,r){const l=z("GDialogOverlay"),i=z("GDialogFrame");return f(),S(M,null,[C(e.$slots,"activator",oe(ae(e.activatorAttrs))),e.activatedOnce?(f(),S(M,{key:0},[(f(),y(P,{to:e.teleportTo,disabled:e.local||e.disableTeleport},[e.fullscreen?O("",!0):(f(),y(l,{key:0,ref:"overlayComponent",active:e.isActive,"z-index":e.zIndex,background:e.overlayBackground,local:e.local,onClick:e.onClickOutside},null,8,["active","z-index","background","local","onClick"]))],8,["to","disabled"])),(f(),y(P,{to:e.teleportTo,disabled:e.local||e.disableTeleport},[K(i,{ref:"frameComponent","is-active":e.isActive,"z-index":e.zIndex,"max-width":e.maxWidth,width:e.width,height:e.height,scrollable:e.scrollable,transition:e.transition,depressed:e.depressed,fullscreen:e.fullscreen,background:e.background,"border-radius":e.borderRadius,"content-class":e.contentClass,local:e.local,persistent:e.persistent},{default:B(()=>[C(e.$slots,"default",{onClose:e.onClose})]),_:3},8,["is-active","z-index","max-width","width","height","scrollable","transition","depressed","fullscreen","background","border-radius","content-class","local","persistent"])],8,["to","disabled"]))],64)):O("",!0)],64)}var Ge=N(De,[["render",Te]]);te([]);export{Ge as G};
