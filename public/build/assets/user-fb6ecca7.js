import{L as x}from"./main-dc2e1d31.js";import{a as d}from"./axios-dd1c8fc2.js";import{g as I}from"./style-2b4551fa.js";import{_ as B,r as i,y as S,o as a,i as m,a as s,v as U,c as _,w as n,b as c,t as u,d as w,q as b,s as z,F as V,k as C,z as F}from"../js/app2.js";import"./logo-light-9f0efe74.js";import"./logo-9faa3827.js";import"./avatar-1-15b743f1.js";import"./avatar-3-36dc574b.js";const O={components:{Vue3Datatable:I},data(){return{roles:[],cols:[{field:"id",width:"50px",title:"ID"},{field:"role",title:"ROLE"},{field:"actions",title:"ACTION"}],loading:!0,total_rows:0,params:{current_page:1,pagesize:5},rows:[],role:"",showModal:!1,state:null,errors:null}},methods:{kesini(){this.showModal=!1},async getRoles(){await d.get("/api/admin/role").then(t=>{this.rows=t.data.data,this.pagi=t.data.links.length,this.loading=!1,this.total_rows=t.data.total})},viewUser(t){alert(`View User 
`+t.role)},async paginate(){await d.get("/api/admin/role?paginate="+this.showData).then(t=>{this.roles=t.data})},async deleteUser(t){confirm("yakin akan menghapus")&&await d.delete("/api/admin/role/"+t.id).then(o=>{this.getRoles()})},async changeServer(t){this.loading=!0,await d.get("/api/admin/role?page="+t.current_page+"&paginate="+parseInt(t.pagesize)).then(o=>{this.rows=o.data.data,this.loading=!1})},async simRole(){await d.post("/api/admin/role",{role:this.role}).then(t=>{this.getRoles(),this.role="",this.errors=null,this.state=null,this.showModal=!1}).catch(t=>{this.errors=t.response.data,this.state=!1})},cek(){alert("gggg")}},created(){this.getRoles()}},D={class:"col-6"},A={class:"card"},L=s("div",{class:"card-header"},[s("div",{class:"card-title"},[s("h3",null,"Management Role")])],-1),E={class:"card-body"},N={class:"clearfix"},H=s("span",{class:"fa fa-robot"},null,-1),T={class:"flex gap-4"},q=["onClick"],P=s("span",{class:"fa fa-eye"},null,-1),j=[P],G=["onClick"],J=s("span",{class:"fa fa-trash"},null,-1),K=[J],Q={class:"form-group"},W=s("label",{for:""},"Create Role",-1);function X(t,o,k,R,e,r){const p=i("BButton"),h=i("vue3-datatable"),g=i("BFormInput"),f=i("BFormInvalidFeedback"),y=i("BModal"),M=S("b-modal");return a(),m("div",D,[s("div",A,[L,s("div",E,[s("div",N,[U((a(),_(p,{class:"float-end my-3 btn-success"},{default:n(()=>[H]),_:1})),[[M,void 0,void 0,{"modal-center1":!0}]])]),c(h,{rows:e.rows,columns:e.cols,loading:e.loading,totalRows:e.total_rows,isServerMode:!0,pageSize:e.params.pagesize,onChange:r.changeServer,pageSizeOptions:[5,10,20,50,100],class:"table"},{id:n(l=>[s("strong",null,u(l.value.id),1)]),actions:n(l=>[s("div",T,[s("button",{type:"button",class:"btn btn-success btn-sm bt-sm !py-1 m-2",onClick:v=>r.viewUser(l.value)},j,8,q),s("button",{type:"button",class:"btn btn-danger btn-sm !py-1",onClick:v=>r.deleteUser(l.value)},K,8,G)])]),_:1},8,["rows","columns","loading","totalRows","pageSize","onChange"]),c(y,{modelValue:e.showModal,"onUpdate:modelValue":o[1]||(o[1]=l=>e.showModal=l),onHide:o[2]||(o[2]=z(()=>{},["prevent"])),onOk:r.simRole,onCancel:o[3]||(o[3]=l=>e.showModal=!e.showModal),onClose:o[4]||(o[4]=l=>e.showModal=!e.showModal),id:"modal-center1",centered:"",title:"Add Role"},{default:n(()=>[s("form",null,[s("div",Q,[W,c(g,{id:"input-invalid",state:e.state,modelValue:e.role,"onUpdate:modelValue":o[0]||(o[0]=l=>e.role=l),placeholder:"role"},null,8,["state","modelValue"]),e.errors?(a(),_(f,{key:0,id:"input-live-feedback"},{default:n(()=>[w(u(e.errors.message),1)]),_:1})):b("",!0)])])]),_:1},8,["modelValue","onOk"])])])])}const Y=B(O,[["render",X]]),Z={components:{Vue3Datatable:I},data(){return{roles:[],cols:[{field:"id",width:"50px",title:"ID"},{field:"name",title:"NAME"},{field:"email",title:"EMAIL",width:"250px"},{field:"actions",title:"ACTION"}],loading:!0,total_rows:0,params:{current_page:1,pagesize:5},rows:[],name:"",email:"",password:"",showModal:!1,state:null,errors:null}},methods:{kesini(){this.showModal=!1},async getRoles(){await d.get("/api/admin/user").then(t=>{this.rows=t.data.data,this.pagi=t.data.links.length,this.loading=!1,this.total_rows=t.data.total})},viewUser(t){alert(`View User 
`+t.id)},async deleteUser(t){confirm("yakin akan menghapus")&&await d.delete("/api/admin/user/"+t.id).then(o=>{this.getRoles()})},async changeServer(t){this.loading=!0,await d.get("/api/admin/user?page="+t.current_page+"&paginate="+parseInt(t.pagesize)).then(o=>{this.rows=o.data.data,this.loading=!1})},async simRole(){await d.post("/api/admin/user",{name:this.name,email:this.email,password:this.password}).then(t=>{this.getRoles(),this.name="",this.email="",this.password="",this.errors=null,this.state=null,this.showModal=!1}).catch(t=>{this.errors=t.response.data,this.state=!1})}},created(){this.getRoles()}},$={class:"col-6"},ee={class:"card"},se=s("div",{class:"card-header"},[s("div",{class:"card-title"},[s("h3",null,"Management User")])],-1),te={class:"card-body"},oe={class:"clearfix"},le=s("span",{class:"fa fa-user"},null,-1),ae={class:"flex gap-4"},ne=["onClick"],ie=s("span",{class:"fa fa-eye"},null,-1),re=[ie],de=["onClick"],ce=s("span",{class:"fa fa-trash"},null,-1),ue=[ce],me={class:"form-group"},_e=s("label",{for:""},"Create User",-1),pe=s("label",{for:"",class:"mt-4"},"Email",-1),he=s("label",{for:"",class:"mt-4"},"Password",-1);function ge(t,o,k,R,e,r){const p=i("BButton"),h=i("vue3-datatable"),g=i("BFormInput"),f=i("BFormInvalidFeedback"),y=i("BModal"),M=S("b-modal");return a(),m("div",$,[s("div",ee,[se,s("div",te,[s("div",oe,[U((a(),_(p,{class:"float-end mb-2 btn-success"},{default:n(()=>[le]),_:1})),[[M,void 0,void 0,{"modal-center":!0}]])]),c(h,{rows:e.rows,columns:e.cols,loading:e.loading,totalRows:e.total_rows,isServerMode:!0,pageSize:e.params.pagesize,onChange:r.changeServer,pageSizeOptions:[5,10,20,50,100],class:"table"},{id:n(l=>[s("strong",null,u(l.value.id),1)]),actions:n(l=>[s("div",ae,[s("button",{type:"button",class:"btn btn-success btn-sm bt-sm !py-1 m-2",onClick:v=>r.viewUser(l.value)},re,8,ne),s("button",{type:"button",class:"btn btn-danger btn-sm !py-1",onClick:v=>r.deleteUser(l.value)},ue,8,de)])]),_:1},8,["rows","columns","loading","totalRows","pageSize","onChange"]),c(y,{modelValue:e.showModal,"onUpdate:modelValue":o[3]||(o[3]=l=>e.showModal=l),onHide:o[4]||(o[4]=z(()=>{},["prevent"])),onOk:r.simRole,onCancel:o[5]||(o[5]=l=>e.showModal=!e.showModal),onClose:o[6]||(o[6]=l=>e.showModal=!e.showModal),id:"modal-center",centered:"",title:"Add User"},{default:n(()=>[s("form",null,[s("div",me,[_e,c(g,{id:"input-invalid",state:e.state,modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.name=l),placeholder:"users"},null,8,["state","modelValue"]),e.errors?(a(),_(f,{key:0,id:"input-live-feedback"},{default:n(()=>[w(u(e.errors.message),1)]),_:1})):b("",!0),pe,c(g,{id:"input-invalid",state:e.state,modelValue:e.email,"onUpdate:modelValue":o[1]||(o[1]=l=>e.email=l),placeholder:"email"},null,8,["state","modelValue"]),e.errors?(a(),_(f,{key:1,id:"input-live-feedback"},{default:n(()=>[w(u(e.errors.message),1)]),_:1})):b("",!0),he,c(g,{id:"input-invalid",state:e.state,modelValue:e.password,"onUpdate:modelValue":o[2]||(o[2]=l=>e.password=l),placeholder:"password"},null,8,["state","modelValue"]),e.errors?(a(),_(f,{key:2,id:"input-live-feedback"},{default:n(()=>[w(u(e.errors.message),1)]),_:1})):b("",!0)])])]),_:1},8,["modelValue","onOk"])])])])}const fe=B(Z,[["render",ge]]),ve={components:{Vue3Datatable:I},data(){return{roles:[],cols:[{field:"id",title:"ID"},{field:"name",title:"NAME"},{field:"email",title:"EMAIL"},{field:"role",title:"ROLE"}],loading:!0,total_rows:0,params:{current_page:1,pagesize:5},rows:[],user:"",role:"",showModal:!1,state:null,errors:null}},methods:{async getRoles(){await d.get("/api/admin/role").then(t=>{this.roles=t.data.data})},async getUser(){await d.get("/api/admin/user").then(t=>{this.rows=t.data.data,this.pagi=t.data.links.length,this.loading=!1,this.total_rows=t.data.total})},viewUser(t){alert(`View User 
`+t.id)},async deleteUser(t){confirm("yakin akan menghapus")&&await d.delete("/api/admin/user/"+t.id).then(o=>{this.getUser()})},async changeServer(t){this.loading=!0,await d.get("/api/admin/user?page="+t.current_page+"&paginate="+parseInt(t.pagesize)).then(o=>{this.rows=o.data.data,this.loading=!1})},async simUserRole(){await d.post("/api/admin/user",{user:this.user,role:this.role}).then(t=>{this.getUser(),this.user="",this.role="",this.errors=null,this.state=null,this.showModal=!1}).catch(t=>{this.errors=t.response.data,this.state=!1})},async removeRole(t,o){confirm("anda yakin menghapus role")&&await d.delete("/api/admin/user/"+t+"/"+o).then(k=>{this.getUser()})}},created(){this.getUser(),this.getRoles()}},we={class:"col-12"},be={class:"card"},ke=s("div",{class:"card-header"},[s("div",{class:"card-title"},[s("h3",null,"Management User Role")])],-1),ye={class:"card-body"},Me={class:"clearfix"},Ue=s("span",{class:"fas fa-atom"},null,-1),Be={class:"form-group"},Re=s("label",{for:""},"User",-1),Ve=["value"],Ce=s("label",{for:""},"Role",-1),Ie=["value"];function Se(t,o,k,R,e,r){const p=i("BButton"),h=i("BBadge"),g=i("vue3-datatable"),f=i("BFormInvalidFeedback"),y=i("BModal"),M=S("b-modal");return a(),m("div",we,[s("div",be,[ke,s("div",ye,[s("div",Me,[U((a(),_(p,{class:"float-end mb-2 btn-success"},{default:n(()=>[Ue]),_:1})),[[M,void 0,void 0,{"modal-center-userR":!0}]])]),c(g,{rows:e.rows,columns:e.cols,loading:e.loading,totalRows:e.total_rows,isServerMode:!0,pageSize:e.params.pagesize,onChange:r.changeServer,pageSizeOptions:[5,10,20,50,100],class:"table"},{id:n(l=>[s("strong",null,u(l.value.id),1)]),role:n(l=>[(a(!0),m(V,null,C(l.value.roles,v=>(a(),m("ul",null,[s("li",null,[c(h,{variant:"primary",pill:"",onClick:qe=>r.removeRole(v.pivot.user_id,v.id),class:"btn"},{default:n(()=>[w(u(v.role),1)]),_:2},1032,["onClick"])])]))),256))]),_:1},8,["rows","columns","loading","totalRows","pageSize","onChange"]),c(y,{modelValue:e.showModal,"onUpdate:modelValue":o[2]||(o[2]=l=>e.showModal=l),onHide:o[3]||(o[3]=z(()=>{},["prevent"])),onOk:r.simUserRole,onCancel:o[4]||(o[4]=l=>e.showModal=!e.showModal),onClose:o[5]||(o[5]=l=>e.showModal=!e.showModal),id:"modal-center-userR",centered:"",title:"Add User Role"},{default:n(()=>[s("form",null,[s("div",Be,[Re,U(s("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=l=>e.user=l)},[(a(!0),m(V,null,C(e.rows,l=>(a(),m("option",{key:l.id,value:l.id},u(l.name),9,Ve))),128))],512),[[F,e.user]]),e.errors?(a(),_(f,{key:0,id:"input-live-feedback"},{default:n(()=>[w(u(e.errors.message),1)]),_:1})):b("",!0),Ce,U(s("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=l=>e.role=l)},[(a(!0),m(V,null,C(e.roles,l=>(a(),m("option",{key:l.id,value:l.id},u(l.role),9,Ie))),128))],512),[[F,e.role]]),e.errors?(a(),_(f,{key:1,id:"input-live-feedback"},{default:n(()=>[w(u(e.errors.message),1)]),_:1})):b("",!0)])])]),_:1},8,["modelValue","onOk"])])])])}const ze=B(ve,[["render",Se]]),Fe={components:{manRole:Y,manUser:fe,manRoleUser:ze}},xe={class:"row"},Oe={class:"col-12"},De={class:"row"},Ae={class:"col-12"},Le={class:"row"};function Ee(t,o,k,R,e,r){const p=i("man-user"),h=i("man-role"),g=i("man-role-user");return a(),m("div",xe,[s("div",Oe,[s("div",De,[c(p),c(h)])]),s("div",Ae,[s("div",Le,[c(g)])])])}const Ne=B(Fe,[["render",Ee]]),He={components:{Layout:x,FormCreate:Ne}};function Te(t,o,k,R,e,r){const p=i("form-create"),h=i("Layout");return a(),_(h,null,{default:n(()=>[c(p)]),_:1})}const Ye=B(He,[["render",Te]]);export{Ye as default};
