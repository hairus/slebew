import{l as b}from"./@babel-043c4917.js";import{r as E}from"./tinyqueue-ccd7a0a5.js";var p={exports:{}},C=E;C.default&&(C=C.default);p.exports=Q;p.exports.default=Q;function Q(r,e,u){e=e||1;for(var i,t,v,s,a=0;a<r[0].length;a++){var n=r[0][a];(!a||n[0]<i)&&(i=n[0]),(!a||n[1]<t)&&(t=n[1]),(!a||n[0]>v)&&(v=n[0]),(!a||n[1]>s)&&(s=n[1])}var d=v-i,h=s-t,m=Math.min(d,h),f=m/2;if(m===0){var q=[i,t];return q.distance=0,q}for(var w=new C(void 0,T),M=i;M<v;M+=m)for(var S=t;S<s;S+=m)w.push(new l(M+f,S+f,f,r));var x=Y(r),D=new l(i+d/2,t+h/2,0,r);D.d>x.d&&(x=D);for(var $=w.length;w.length;){var o=w.pop();o.d>x.d&&(x=o,u&&console.log("found best %d after %d probes",Math.round(1e4*o.d)/1e4,$)),!(o.max-x.d<=e)&&(f=o.h/2,w.push(new l(o.x-f,o.y-f,f,r)),w.push(new l(o.x+f,o.y-f,f,r)),w.push(new l(o.x-f,o.y+f,f,r)),w.push(new l(o.x+f,o.y+f,f,r)),$+=4)}u&&(console.log("num probes: "+$),console.log("best distance: "+x.d));var c=[x.x,x.y];return c.distance=x.d,c}function T(r,e){return e.max-r.max}function l(r,e,u,i){this.x=r,this.y=e,this.h=u,this.d=X(r,e,i),this.max=this.d+this.h*Math.SQRT2}function X(r,e,u){for(var i=!1,t=1/0,v=0;v<u.length;v++)for(var s=u[v],a=0,n=s.length,d=n-1;a<n;d=a++){var h=s[a],m=s[d];h[1]>e!=m[1]>e&&r<(m[0]-h[0])*(e-h[1])/(m[1]-h[1])+h[0]&&(i=!i),t=Math.min(t,z(r,e,h,m))}return t===0?0:(i?1:-1)*Math.sqrt(t)}function Y(r){for(var e=0,u=0,i=0,t=r[0],v=0,s=t.length,a=s-1;v<s;a=v++){var n=t[v],d=t[a],h=n[0]*d[1]-d[0]*n[1];u+=(n[0]+d[0])*h,i+=(n[1]+d[1])*h,e+=h*3}return e===0?new l(t[0][0],t[0][1],0,r):new l(u/e,i/e,0,r)}function z(r,e,u,i){var t=u[0],v=u[1],s=i[0]-t,a=i[1]-v;if(s!==0||a!==0){var n=((r-t)*s+(e-v)*a)/(s*s+a*a);n>1?(t=i[0],v=i[1]):n>0&&(t+=s*n,v+=a*n)}return s=r-t,a=e-v,s*s+a*a}var F=p.exports;const R=b(F);export{R as $};
