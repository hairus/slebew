import{f as b,L as O}from"./main-85dda269.js";import{g as z}from"./@bhplugin-6696326a.js";import{a as h}from"./axios-dd1c8fc2.js";import"./vue-e44c720a.js";import{_ as y}from"../js/app2.js";import{ae as d,a as i,b as a,f as c,_ as u,e as t,k as m,p as v,v as k,h as T,F as S,g as x,l as C,t as M,bk as F,M as V,m as w,bi as N,bg as D}from"./@vue-2f47e84f.js";import"./simplebar-vue-f87408bd.js";import"./simplebar-core-3f5973b9.js";import"./lodash-es-9b1d07da.js";import"./logo-light-9f0efe74.js";import"./logo-9faa3827.js";import"./avatar-1-15b743f1.js";import"./avatar-3-36dc574b.js";import"./metismenujs-584191f1.js";import"./@babel-043c4917.js";import"./@amcharts-e4830be1.js";import"./tslib-72b7de63.js";import"./d3-geo-6bb4a2e5.js";import"./d3-array-e52edd26.js";import"./polylabel-4d4cd514.js";import"./tinyqueue-ccd7a0a5.js";import"./d3-geo-projection-f6bdcdf9.js";import"./core-js-01584e85.js";import"./raf-98f7053a.js";import"./performance-now-4def5153.js";import"./rgbcolor-a22a20ff.js";import"./stackblur-canvas-7b6438f0.js";import"./vue-router-bbc31d4f.js";import"./figlet-ec70a4bf.js";import"./vue3-apexcharts-094e7a9e.js";import"./maska-1eacf752.js";import"./vue-i18n-af6f3290.js";import"./@intlify-28f1e2f7.js";import"./bootstrap-vue-next-9af1e26b.js";import"./gitart-vue-dialog-1c989299.js";import"./@vueform-66335761.js";const j={name:"ModalAddMenu",props:["roles"],data(){return{showModal:!1,label:"",isTitle:null,icon:"",role:""}},watch:{isTitle(s){s===!0&&(this.icon="bx")}},methods:{closeModal(){this.showModal=!this.showModal,this.label="",this.isTitle=null,this.role="",this.icon="bx"},removeIsTitlePlaceholder(){this.isTitle===null&&(this.isTitle=!1)},removeRolePlaceholder(){this.role=this.role||null},async simMenu(){if(this.isTitle===null)return alert("Title Option tidak boleh kosong!");if(this.role===null||this.role==="")return alert("Role Menu tidak boleh kosong!");if(this.label==="")return alert("Label tidak boleh kosong!");await h.post("/api/admin/menus",{label:this.label,isTitle:this.isTitle,role:this.role,icon:this.isTitle?"bx":this.icon}).then(s=>{this.showModal=!1,this.$emit("reload"),this.label="",this.isTitle=null,this.role="",this.icon="",b()})}}},H={class:"form-group"},E=t("label",{for:""},"Label",-1),Y={class:"form-group"},q=t("label",{for:""},"Sebagai Title?",-1),G=t("option",{value:null,disabled:""},"- Pilih Title Option -",-1),J=t("option",{value:!1},"Tidak, jadikan parent menu",-1),K=t("option",{value:!0},"Ya, jadikan title menu",-1),Q=[G,J,K],W={key:0,class:"form-group"},X=t("label",{for:""},"Icon",-1),Z={class:"form-group"},$=t("label",{for:""},"Role",-1),ee={key:0,disabled:"",value:""},oe=["value"];function te(s,e,r,_,l,n){const p=d("BModal");return i(),a("div",null,[c(p,{modelValue:l.showModal,"onUpdate:modelValue":e[6]||(e[6]=o=>l.showModal=o),onHide:e[7]||(e[7]=C(()=>{},["prevent"])),onOk:n.simMenu,onCancel:n.closeModal,onClose:n.closeModal,id:"modal-center-menu",centered:"",title:"Add Menu or Title"},{default:u(()=>[t("form",null,[t("div",H,[E,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>l.label=o)},null,512),[[v,l.label]])]),t("div",Y,[q,m(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=o=>l.isTitle=o),onFocus:e[2]||(e[2]=(...o)=>n.removeIsTitlePlaceholder&&n.removeIsTitlePlaceholder(...o))},Q,544),[[k,l.isTitle]])]),l.isTitle?T("",!0):(i(),a("div",W,[X,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=o=>l.icon=o)},null,512),[[v,l.icon]])])),t("div",Z,[$,m(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=o=>l.role=o),onFocus:e[5]||(e[5]=(...o)=>n.removeRolePlaceholder&&n.removeRolePlaceholder(...o))},[l.role?T("",!0):(i(),a("option",ee,"- Pilih Role -")),(i(!0),a(S,null,x(r.roles,o=>(i(),a("option",{key:o.id,value:o.role},M(o.role),9,oe))),128))],544),[[k,l.role]])])])]),_:1},8,["modelValue","onOk","onCancel","onClose"])])}const le=y(j,[["render",te]]),se={name:"ModalAddSubMenu",props:["menus","roles"],data(){return{showModal:!1,parent:"",label:"",link:""}},methods:{closeModal(){this.showModal=!this.showModal,this.parent="",this.label="",this.link=""},removePlaceholder(){this.parent=this.parent||null},async simSub(){if(this.parent===""||this.label===""||this.link==="")return alert(`Tolong lengkapi form terlebih dahulu

Harap perhatikan:
 - Parent Menu
 - Label Menu
 - Link Menu`);await h.post("/api/admin/menus",{parent:this.parent,label:this.label,link:this.link}).then(s=>{this.showModal=!1,this.$emit("reload"),this.parent="",this.label="",this.link="",b()})}}},ne={class:"form-group"},ie=t("label",{for:"",class:"mt-4"},"Parent",-1),ae={key:0,disabled:"",value:""},re=["value"],de=t("label",{for:"",class:"mt-4"},"Label",-1),ue=t("label",{for:"",class:"mt-4"},"Link",-1);function me(s,e,r,_,l,n){const p=d("BModal");return i(),a("div",null,[c(p,{modelValue:l.showModal,"onUpdate:modelValue":e[4]||(e[4]=o=>l.showModal=o),onHide:e[5]||(e[5]=C(()=>{},["prevent"])),onOk:n.simSub,onCancel:n.closeModal,onClose:n.closeModal,id:"modal-center-SubMenu",centered:"",title:"Add Sub Menu"},{default:u(()=>[t("form",null,[t("div",ne,[ie,m(t("select",{name:"",id:"","onUpdate:modelValue":e[0]||(e[0]=o=>l.parent=o),class:"form-control",onFocus:e[1]||(e[1]=(...o)=>n.removePlaceholder&&n.removePlaceholder(...o))},[l.parent?T("",!0):(i(),a("option",ae,"- Pilih Parent Menu -")),(i(!0),a(S,null,x(r.menus,o=>(i(),a("option",{key:o.id,value:o.id},M(o.label),9,re))),128))],544),[[k,l.parent]]),de,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=o=>l.label=o)},null,512),[[v,l.label]]),ue,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=o=>l.link=o)},null,512),[[v,l.link]])])])]),_:1},8,["modelValue","onOk","onCancel","onClose"])])}const ce=y(se,[["render",me]]);const pe={data(){return{cols:[{field:"id",title:"No"},{field:"label",title:"Label"},{field:"isTitle",title:"isTitle"},{field:"icon",title:"Icon"},{field:"role",title:"Role"},{field:"sub_menus",title:"SubMenu"}],loading:!0,total_rows:0,params:{current_page:1,pagesize:5},rows:[],errors:[],roles:[],subRows:[]}},methods:{async getMenus(){await h.get("/api/admin/menus").then(s=>{const e=s.data.data.filter(r=>r.isTitle===0||r.isTitle===!1);this.subRows=e,this.rows=s.data.data,this.total_rows=s.data.total,this.loading=!1,b()}).catch(s=>{console.log(s)})},async getRoles(){await h.get("/api/admin/role").then(s=>{this.roles=s.data.data})},async remSub(s){confirm("anda yakin menghapus sub menu ?")&&await h.delete("/api/admin/menus/"+s).then(e=>{this.getMenus(),b()})},async changeServer(s){console.log(s),this.loading=!0,await h.get("/api/admin/menus?page="+s.current_page+"&paginate="+parseInt(s.pagesize)).then(e=>{const r=e.data.data.filter(_=>_.isTitle===0||_.isTitle===!1);this.subRows=r,this.rows=e.data.data,this.loading=!1,b()})}},components:{Layout:O,Vue3Datatable:z,AddMenu:le,AddSubMenu:ce},created(){this.getMenus(),this.getRoles()}},B=s=>(N("data-v-b45739bd"),s=s(),D(),s),he={class:"card"},_e=B(()=>t("div",{class:"card-header"},[t("div",{class:"card-title"},"Setting Menu")],-1)),be={class:"card-body"},fe={class:"clearfix"},ve={class:"table table-responsive"},Me={class:"d-flex justify-content-between",style:{width:"190px"}},ge=["onClick"],we=B(()=>t("span",{class:"fa fa-trash"},null,-1)),ke=[we];function Te(s,e,r,_,l,n){const p=d("BButton"),o=d("vue3-datatable"),P=d("BRow"),L=d("BCol"),I=d("add-menu"),U=d("add-sub-menu"),A=d("Layout"),R=F("b-modal");return i(),a("div",null,[c(A,null,{default:u(()=>[c(L,null,{default:u(()=>[c(P,null,{default:u(()=>[t("div",he,[_e,t("div",be,[t("div",fe,[m((i(),V(p,{class:"float-end mb-2 btn-success"},{default:u(()=>[w("Add Menu or Title ")]),_:1})),[[R,void 0,void 0,{"modal-center-menu":!0}]]),m((i(),V(p,{class:"float-end mb-2 btn-info me-2"},{default:u(()=>[w("Add Sub Menu ")]),_:1})),[[R,void 0,void 0,{"modal-center-SubMenu":!0}]])]),t("div",ve,[c(o,{rows:l.rows,columns:l.cols,loading:l.loading,totalRows:l.total_rows,isServerMode:!0,pageSize:l.params.pagesize,onChange:n.changeServer,pageSizeOptions:[5,10,20,50,100],skin:"bh-table-striped"},{id:u(f=>[t("p",null,M(f.value.id),1)]),sub_menus:u(f=>[(i(!0),a(S,null,x(f.value.sub_menus,g=>(i(),a("ul",{key:g.id},[t("li",Me,[w(M(g.label)+" ",1),t("button",{class:"btn btn-danger btn-sm",onClick:ye=>n.remSub(g.id)},ke,8,ge)])]))),128))]),_:1},8,["rows","columns","loading","totalRows","pageSize","onChange"])])])])]),_:1})]),_:1}),c(I,{roles:l.roles,onReload:n.getMenus},null,8,["roles","onReload"]),c(U,{menus:l.subRows,roles:l.roles,onReload:e[0]||(e[0]=f=>n.getMenus())},null,8,["menus","roles"])]),_:1})])}const ao=y(pe,[["render",Te],["__scopeId","data-v-b45739bd"]]);export{ao as default};
