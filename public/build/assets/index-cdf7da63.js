import{f,L as O}from"./main-26e9ec71.js";import{g as z}from"./@bhplugin-2d16fc03.js";import{a as p}from"./axios-dd1c8fc2.js";import"./vue-4b54ea58.js";import{_ as y}from"../js/app2.js";import{a7 as d,a as i,b as a,f as m,K as u,e as l,k as c,p as v,v as k,h as T,F as S,g as x,l as C,t as M,ak as N,N as V,m as w,al as F,am as D}from"./@vue-26c81de9.js";import"./simplebar-vue-28197e1a.js";import"./simplebar-core-3f5973b9.js";import"./lodash-es-9b1d07da.js";import"./logo-9faa3827.js";import"./metismenujs-584191f1.js";import"./vue-router-04b37a5f.js";import"./figlet-aa9a71dd.js";import"./vue3-apexcharts-fb268ad8.js";import"./maska-1eacf752.js";import"./vue-i18n-74a42a2b.js";import"./@intlify-28f1e2f7.js";import"./bootstrap-vue-next-71fdbf68.js";import"./gitart-vue-dialog-9c3bddb2.js";/* empty css                 */const j={name:"ModalAddMenu",props:["roles"],data(){return{showModal:!1,label:"",isTitle:null,icon:"",role:""}},watch:{isTitle(s){s===!0&&(this.icon="bx")}},methods:{closeModal(){this.showModal=!this.showModal,this.label="",this.isTitle=null,this.role="",this.icon="bx"},removeIsTitlePlaceholder(){this.isTitle===null&&(this.isTitle=!1)},removeRolePlaceholder(){this.role=this.role||null},async simMenu(){if(this.isTitle===null)return alert("Title Option tidak boleh kosong!");if(this.role===null||this.role==="")return alert("Role Menu tidak boleh kosong!");if(this.label==="")return alert("Label tidak boleh kosong!");await p.post("/api/admin/menus",{label:this.label,isTitle:this.isTitle,role:this.role,icon:this.isTitle?"bx":this.icon}).then(s=>{this.showModal=!1,this.$emit("reload"),this.label="",this.isTitle=null,this.role="",this.icon="",f()})}}},H={class:"form-group"},E=l("label",{for:""},"Label",-1),K={class:"form-group"},Y=l("label",{for:""},"Sebagai Title?",-1),q=l("option",{value:null,disabled:""},"- Pilih Title Option -",-1),G=l("option",{value:!1},"Tidak, jadikan parent menu",-1),J=l("option",{value:!0},"Ya, jadikan title menu",-1),Q=[q,G,J],W={key:0,class:"form-group"},X=l("label",{for:""},"Icon",-1),Z={class:"form-group"},$=l("label",{for:""},"Role",-1),ee={key:0,disabled:"",value:""},oe=["value"];function le(s,e,r,_,t,n){const h=d("BModal");return i(),a("div",null,[m(h,{modelValue:t.showModal,"onUpdate:modelValue":e[6]||(e[6]=o=>t.showModal=o),onHide:e[7]||(e[7]=C(()=>{},["prevent"])),onOk:n.simMenu,onCancel:n.closeModal,onClose:n.closeModal,id:"modal-center-menu",centered:"",title:"Add Menu or Title"},{default:u(()=>[l("form",null,[l("div",H,[E,c(l("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>t.label=o)},null,512),[[v,t.label]])]),l("div",K,[Y,c(l("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=o=>t.isTitle=o),onFocus:e[2]||(e[2]=(...o)=>n.removeIsTitlePlaceholder&&n.removeIsTitlePlaceholder(...o))},Q,544),[[k,t.isTitle]])]),t.isTitle?T("",!0):(i(),a("div",W,[X,c(l("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=o=>t.icon=o)},null,512),[[v,t.icon]])])),l("div",Z,[$,c(l("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=o=>t.role=o),onFocus:e[5]||(e[5]=(...o)=>n.removeRolePlaceholder&&n.removeRolePlaceholder(...o))},[t.role?T("",!0):(i(),a("option",ee,"- Pilih Role -")),(i(!0),a(S,null,x(r.roles,o=>(i(),a("option",{key:o.id,value:o.role},M(o.role),9,oe))),128))],544),[[k,t.role]])])])]),_:1},8,["modelValue","onOk","onCancel","onClose"])])}const te=y(j,[["render",le]]),se={name:"ModalAddSubMenu",props:["menus","roles"],data(){return{showModal:!1,parent:"",label:"",link:""}},methods:{closeModal(){this.showModal=!this.showModal,this.parent="",this.label="",this.link=""},removePlaceholder(){this.parent=this.parent||null},async simSub(){if(this.parent===""||this.label===""||this.link==="")return alert(`Tolong lengkapi form terlebih dahulu

Harap perhatikan:
 - Parent Menu
 - Label Menu
 - Link Menu`);await p.post("/api/admin/menus",{parent:this.parent,label:this.label,link:this.link}).then(s=>{this.showModal=!1,this.$emit("reload"),this.parent="",this.label="",this.link="",f()})}}},ne={class:"form-group"},ie=l("label",{for:"",class:"mt-4"},"Parent",-1),ae={key:0,disabled:"",value:""},re=["value"],de=l("label",{for:"",class:"mt-4"},"Label",-1),ue=l("label",{for:"",class:"mt-4"},"Link",-1);function ce(s,e,r,_,t,n){const h=d("BModal");return i(),a("div",null,[m(h,{modelValue:t.showModal,"onUpdate:modelValue":e[4]||(e[4]=o=>t.showModal=o),onHide:e[5]||(e[5]=C(()=>{},["prevent"])),onOk:n.simSub,onCancel:n.closeModal,onClose:n.closeModal,id:"modal-center-SubMenu",centered:"",title:"Add Sub Menu"},{default:u(()=>[l("form",null,[l("div",ne,[ie,c(l("select",{name:"",id:"","onUpdate:modelValue":e[0]||(e[0]=o=>t.parent=o),class:"form-control",onFocus:e[1]||(e[1]=(...o)=>n.removePlaceholder&&n.removePlaceholder(...o))},[t.parent?T("",!0):(i(),a("option",ae,"- Pilih Parent Menu -")),(i(!0),a(S,null,x(r.menus,o=>(i(),a("option",{key:o.id,value:o.id},M(o.label),9,re))),128))],544),[[k,t.parent]]),de,c(l("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=o=>t.label=o)},null,512),[[v,t.label]]),ue,c(l("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=o=>t.link=o)},null,512),[[v,t.link]])])])]),_:1},8,["modelValue","onOk","onCancel","onClose"])])}const me=y(se,[["render",ce]]);const he={data(){return{cols:[{field:"id",title:"No"},{field:"label",title:"Label"},{field:"isTitle",title:"isTitle"},{field:"icon",title:"Icon"},{field:"role",title:"Role"},{field:"sub_menus",title:"SubMenu"}],loading:!0,total_rows:0,params:{current_page:1,pagesize:5},rows:[],errors:[],roles:[],subRows:[]}},methods:{async getMenus(){await p.get("/api/admin/menus").then(s=>{const e=s.data.data.filter(r=>r.isTitle===0||r.isTitle===!1);this.subRows=e,this.rows=s.data.data,this.total_rows=s.data.total,this.loading=!1,f()}).catch(s=>{console.log(s)})},async getRoles(){await p.get("/api/admin/role").then(s=>{this.roles=s.data.data})},async remSub(s){confirm("anda yakin menghapus sub menu ?")&&await p.delete("/api/admin/menus/"+s).then(e=>{this.getMenus(),f()})},async changeServer(s){console.log(s),this.loading=!0,await p.get("/api/admin/menus?page="+s.current_page+"&paginate="+parseInt(s.pagesize)).then(e=>{const r=e.data.data.filter(_=>_.isTitle===0||_.isTitle===!1);this.subRows=r,this.rows=e.data.data,this.loading=!1,f()})}},components:{Layout:O,Vue3Datatable:z,AddMenu:te,AddSubMenu:me},created(){this.getMenus(),this.getRoles()}},B=s=>(F("data-v-6ec72936"),s=s(),D(),s),pe={class:"card"},_e=B(()=>l("div",{class:"card-header"},[l("div",{class:"card-title"},"Setting Menu")],-1)),fe={class:"card-body"},be={class:"clearfix"},ve={class:"table table-responsive"},Me={class:"d-flex justify-content-between",style:{width:"190px"}},ge=["onClick"],we=B(()=>l("span",{class:"fa fa-trash"},null,-1)),ke=[we];function Te(s,e,r,_,t,n){const h=d("BButton"),o=d("vue3-datatable"),P=d("BRow"),L=d("BCol"),I=d("add-menu"),U=d("add-sub-menu"),A=d("Layout"),R=N("b-modal");return i(),a("div",null,[m(A,null,{default:u(()=>[m(L,null,{default:u(()=>[m(P,null,{default:u(()=>[l("div",pe,[_e,l("div",fe,[l("div",be,[c((i(),V(h,{class:"float-end mb-2 btn-success"},{default:u(()=>[w("Add Menu or Title ")]),_:1})),[[R,void 0,void 0,{"modal-center-menu":!0}]]),c((i(),V(h,{class:"float-end mb-2 btn-info me-2"},{default:u(()=>[w("Add Sub Menu ")]),_:1})),[[R,void 0,void 0,{"modal-center-SubMenu":!0}]])]),l("div",ve,[m(o,{rows:t.rows,columns:t.cols,loading:t.loading,totalRows:t.total_rows,isServerMode:!0,pageSize:t.params.pagesize,onChange:n.changeServer,pageSizeOptions:[5,10,20,50,100],skin:"bh-table-striped"},{id:u(b=>[l("p",null,M(b.value.id),1)]),sub_menus:u(b=>[(i(!0),a(S,null,x(b.value.sub_menus,g=>(i(),a("ul",{key:g.id},[l("li",Me,[w(M(g.label)+" ",1),l("button",{class:"btn btn-danger btn-sm",onClick:ye=>n.remSub(g.id)},ke,8,ge)])]))),128))]),_:1},8,["rows","columns","loading","totalRows","pageSize","onChange"])])])])]),_:1})]),_:1}),m(I,{roles:t.roles,onReload:n.getMenus},null,8,["roles","onReload"]),m(U,{menus:t.subRows,roles:t.roles,onReload:e[0]||(e[0]=b=>n.getMenus())},null,8,["menus","roles"])]),_:1})])}const Ye=y(he,[["render",Te],["__scopeId","data-v-6ec72936"]]);export{Ye as default};
