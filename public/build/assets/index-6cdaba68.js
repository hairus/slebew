import{L as D}from"./main-26e9ec71.js";import{P as N}from"./page-header-f1fbf5a1.js";import{a as u}from"./axios-dd1c8fc2.js";import{C as S}from"./vue-flatpickr-component-a9929963.js";import"./flatpickr-434a80ff.js";import"./vue-4b54ea58.js";import{_ as K}from"../js/app2.js";import{b as d,f as a,K as n,a7 as i,a as m,m as c,e as t,t as r,h as L,k as _,v as h,F as f,g as k,p as H}from"./@vue-26c81de9.js";import"./simplebar-vue-28197e1a.js";import"./simplebar-core-3f5973b9.js";import"./lodash-es-9b1d07da.js";import"./logo-9faa3827.js";import"./metismenujs-584191f1.js";import"./figlet-aa9a71dd.js";import"./vue-router-04b37a5f.js";import"./vue3-apexcharts-fb268ad8.js";import"./maska-1eacf752.js";import"./vue-i18n-74a42a2b.js";import"./@intlify-28f1e2f7.js";import"./bootstrap-vue-next-71fdbf68.js";import"./gitart-vue-dialog-9c3bddb2.js";/* empty css                 */const T={data(){return{user:JSON.parse(localStorage.getItem("user")),ptk:null,mapels:[],kelas:[],reports:[],mapel_id:"",kelas_id:null,mapel_id:"",kelas_id:"",dari:"",sampai:"",ket:"",desk:""}},methods:{async getPtk(){await u.get("/api/guru/ijin").then(l=>{this.ptk=l.data,console.log(this.ptk)})},async getMapels(){await u.get("/api/guru/getMapels").then(l=>{this.mapels=l.data})},async getkelas(){await u.get("/api/guru/getGuruKelas").then(l=>{this.kelas=l.data,this.kelas.sort((o,g)=>o.rombels.nama.localeCompare(g.rombels.nama))})},async simpan(){await u.post("/api/guru/simI",{mapel_id:this.mapel_id,kelas_id:this.kelas_id,dari:this.dari,sampai:this.sampai,ket:this.ket,desk:this.desk}).then(l=>{console.log(l)}).catch(l=>{console.log(l,"error")})},async getMe(){console.log({user_id:this.user.user_id}),await u.post("/api/guru/me",{user_id:this.user.user_id}).then(l=>{this.reports=l.data,console.log({"ini reports":this.reports})}).catch(l=>{console.log(l)})},async hapus(l){confirm("yakin menghapus ?")&&await u.delete("/api/guru/del/"+l).then(o=>{this.getMe()})}},components:{Layout:D,PageHeader:N,flatPickr:S},created(){this.getPtk(),this.getMapels(),this.getMe()}},I={key:0},F={class:"btn btn-md btn-outline-primary me-2",type:"button"},R={class:"row"},A={class:"form-group mt-5 col-6"},E=t("label",null,"Pilih mapel",-1),G=t("option",{value:""},"---",-1),J=["value"],O={class:"form-group mt-5 col-6"},q=t("label",null,"Pilih Kelas",-1),z=t("option",{value:""},"---",-1),Q=["value"],W={class:"form-group mt-3 col-6"},X=t("label",{for:""},"Dari",-1),Y={class:"form-group mt-3 col-6"},Z=t("label",{for:""},"Sampai",-1),$={class:"form-group mt-3"},tt=t("label",null,"Pilih Keterangan",-1),et=t("option",{value:"ijin"},"Ijin",-1),ot=t("option",{value:"sakit"},"Sakit",-1),st=t("option",{value:"dl"},"Dinas Luar",-1),lt=[et,ot,st],at={class:"form-group mt-3"},nt=t("label",null,"Deskripsi Tugas",-1),it={class:"table-responsive"},rt={class:"table table-hover"},dt=t("thead",null,[t("th",null,"No"),t("th",null,"Nama"),t("th",null,"Ket"),t("th",null,"Kelas"),t("th",null,"Dari"),t("th",null,"Sampai"),t("th",null,"Desk"),t("th",null,"#")],-1),mt={style:{width:"10%"}},ut=["onClick"],pt=t("span",{class:"fa fa-trash"},null,-1),_t=[pt];function ct(l,o,g,ht,s,p){const B=i("H5"),w=i("BCardTitle"),V=i("BCardHeader"),b=i("flat-pickr"),v=i("BCardBody"),y=i("BCard"),x=i("BCol"),C=i("BBadge"),P=i("bCol"),M=i("BRow"),U=i("Layout");return m(),d("div",null,[a(U,null,{default:n(()=>[a(M,null,{default:n(()=>[a(x,{lg:"6"},{default:n(()=>[a(y,{"no-body":""},{default:n(()=>[a(V,null,{default:n(()=>[a(w,null,{default:n(()=>[a(B,null,{default:n(()=>[c("Apps Perijinan")]),_:1})]),_:1})]),_:1}),a(v,null,{default:n(()=>[s.ptk?(m(),d("div",I,[t("button",F,r(s.ptk.nama.toUpperCase()),1)])):L("",!0),t("div",R,[t("div",A,[E,_(t("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.mapel_id=e),class:"form-control",onChange:o[1]||(o[1]=(...e)=>p.getkelas&&p.getkelas(...e))},[G,(m(!0),d(f,null,k(s.mapels,e=>(m(),d("option",{key:e.mata_pelajaran_id,value:e.mata_pelajaran_id},r(e.mata_pelajaran_id_str),9,J))),128))],544),[[h,s.mapel_id]])]),t("div",O,[q,_(t("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.kelas_id=e),class:"form-control"},[z,(m(!0),d(f,null,k(s.kelas,e=>(m(),d("option",{key:e.rb_id,value:e.rb_id},r(e.rombels.nama),9,Q))),128))],512),[[h,s.kelas_id]])]),t("div",W,[X,a(b,{modelValue:s.dari,"onUpdate:modelValue":o[3]||(o[3]=e=>s.dari=e),"first-day-of-week":1,lang:"en",confirm:"",class:"form-control"},null,8,["modelValue"])]),t("div",Y,[Z,a(b,{modelValue:s.sampai,"onUpdate:modelValue":o[4]||(o[4]=e=>s.sampai=e),"first-day-of-week":1,lang:"en",confirm:"",class:"form-control"},null,8,["modelValue"])]),t("div",$,[tt,_(t("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.ket=e),class:"form-control"},lt,512),[[h,s.ket]])]),t("div",at,[nt,_(t("textarea",{"onUpdate:modelValue":o[6]||(o[6]=e=>s.desk=e),type:"text",class:"form-control"},null,512),[[H,s.desk]])])]),t("button",{class:"btn btn-primary mt-3",onClick:o[7]||(o[7]=(...e)=>p.simpan&&p.simpan(...e))}," simpan ")]),_:1})]),_:1})]),_:1}),a(P,{lg:"6"},{default:n(()=>[a(y,{"np-body":""},{default:n(()=>[a(v,null,{default:n(()=>[t("div",it,[t("table",rt,[dt,t("tbody",null,[(m(!0),d(f,null,k(s.reports,(e,j)=>(m(),d("tr",{key:e.id},[t("td",null,r(j+1),1),t("td",null,[a(C,{variant:"primary"},{default:n(()=>[c(r(e.user.name),1)]),_:2},1024)]),t("td",null,[a(C,{variant:"success"},{default:n(()=>[c(r(e.ket.toUpperCase()),1)]),_:2},1024)]),t("td",mt,r(e.kelas.nama),1),t("td",null,r(e.dari),1),t("td",null,r(e.sampai),1),t("td",null,r(e.desk),1),t("td",null,[t("button",{class:"btn btn-sm btn-danger",onClick:ft=>p.hapus(e.id)},_t,8,ut)])]))),128))])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const Ft=K(T,[["render",ct]]);export{Ft as default};
